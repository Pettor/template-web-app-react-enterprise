import{$ as y,e as C,j as _,k as B}from"./chunk-YZ6YLE2T-AVNVSijw.js";import{W as o,dY as K,bE as N,bC as q,bA as Q,dZ as Y,b_ as W,bL as Z,j as h}from"./index-BkDfcGXb.js";function ce(e,t,a){let r=y(()=>{a&&a(t)});o.useEffect(()=>{var n;let i=e==null||(n=e.current)===null||n===void 0?void 0:n.form;return i?.addEventListener("reset",r),()=>{i?.removeEventListener("reset",r)}},[e])}function P(e){if(!e)return;let t=!0;return a=>{let r={...a,preventDefault(){a.preventDefault()},isDefaultPrevented(){return a.isDefaultPrevented()},stopPropagation(){t=!0},continuePropagation(){t=!1},isPropagationStopped(){return t}};e(r),t&&a.stopPropagation()}}function z(e){return{keyboardProps:e.isDisabled?{}:{onKeyDown:P(e.onKeyDown),onKeyUp:P(e.onKeyUp)}}}let G=N.createContext(null);function H(e){let t=o.useContext(G)||{};B(t,e);let{ref:a,...r}=t;return r}function fe(e,t){let{focusProps:a}=K(e),{keyboardProps:r}=z(e),n=C(a,r),i=H(t),d=e.isDisabled?{}:i,u=o.useRef(e.autoFocus);o.useEffect(()=>{u.current&&t.current&&_(t.current),u.current=!1},[t]);let c=e.excludeFromTabOrder?-1:0;return e.isDisabled&&(c=void 0),{focusableProps:C({...n,tabIndex:c},d)}}var J=q({base:"flex flex-col gap-2 items-start"});const F={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},A={...F,customError:!0,valid:!1},m={isInvalid:!1,validationDetails:F,validationErrors:[]},O=o.createContext({}),D="__formValidationState"+Date.now();function ve(e){if(e[D]){let{realtimeValidation:t,displayValidation:a,updateValidation:r,resetValidation:n,commitValidation:i}=e[D];return{realtimeValidation:t,displayValidation:a,updateValidation:r,resetValidation:n,commitValidation:i}}return X(e)}function X(e){let{isInvalid:t,validationState:a,name:r,value:n,builtinValidation:i,validate:d,validationBehavior:u="aria"}=e;a&&(t||(t=a==="invalid"));let c=t!==void 0?{isInvalid:t,validationErrors:[],validationDetails:A}:null,s=o.useMemo(()=>{if(!d||n==null)return null;let f=ee(d,n);return L(f)},[d,n]);i?.validationDetails.valid&&(i=void 0);let l=o.useContext(O),v=o.useMemo(()=>r?Array.isArray(r)?r.flatMap(f=>I(l[f])):I(l[r]):[],[l,r]),[$,k]=o.useState(l),[M,V]=o.useState(!1);l!==$&&(k(l),V(!1));let p=o.useMemo(()=>L(M?[]:v),[M,v]),w=o.useRef(m),[x,E]=o.useState(m),b=o.useRef(m),T=()=>{if(!U)return;g(!1);let f=s||i||w.current;S(f,b.current)||(b.current=f,E(f))},[U,g]=o.useState(!1);return o.useEffect(T),{realtimeValidation:c||p||s||i||m,displayValidation:u==="native"?c||p||x:c||p||s||i||x,updateValidation(f){u==="aria"&&!S(x,f)?E(f):w.current=f},resetValidation(){let f=m;S(f,b.current)||(b.current=f,E(f)),u==="native"&&g(!1),V(!0)},commitValidation(){u==="native"&&g(!0),V(!0)}}}function I(e){return e?Array.isArray(e)?e:[e]:[]}function ee(e,t){if(typeof e=="function"){let a=e(t);if(a&&typeof a!="boolean")return I(a)}return[]}function L(e){return e.length?{isInvalid:!0,validationErrors:e,validationDetails:A}:null}function S(e,t){return e===t?!0:!!e&&!!t&&e.isInvalid===t.isInvalid&&e.validationErrors.length===t.validationErrors.length&&e.validationErrors.every((a,r)=>a===t.validationErrors[r])&&Object.entries(e.validationDetails).every(([a,r])=>t.validationDetails[a]===r)}function $e(e,t,a){let{validationBehavior:r,focus:n}=e;Q(()=>{if(r==="native"&&a?.current&&!a.current.disabled){let s=t.realtimeValidation.isInvalid?t.realtimeValidation.validationErrors.join(" ")||"Invalid value.":"";a.current.setCustomValidity(s),a.current.hasAttribute("title")||(a.current.title=""),t.realtimeValidation.isInvalid||t.updateValidation(ae(a.current))}});let i=o.useRef(!1),d=y(()=>{i.current||t.resetValidation()}),u=y(s=>{var l;t.displayValidation.isInvalid||t.commitValidation();let v=a==null||(l=a.current)===null||l===void 0?void 0:l.form;if(!s.defaultPrevented&&a&&v&&ie(v)===a.current){var $;n?n():($=a.current)===null||$===void 0||$.focus(),Y("keyboard")}s.preventDefault()}),c=y(()=>{t.commitValidation()});o.useEffect(()=>{let s=a?.current;if(!s)return;let l=s.form,v=l?.reset;return l&&(l.reset=()=>{i.current=!window.event||window.event.type==="message"&&window.event.target instanceof MessagePort,v?.call(l),i.current=!1}),s.addEventListener("invalid",u),s.addEventListener("change",c),l?.addEventListener("reset",d),()=>{s.removeEventListener("invalid",u),s.removeEventListener("change",c),l?.removeEventListener("reset",d),l&&(l.reset=v)}},[a,r])}function te(e){let t=e.validity;return{badInput:t.badInput,customError:t.customError,patternMismatch:t.patternMismatch,rangeOverflow:t.rangeOverflow,rangeUnderflow:t.rangeUnderflow,stepMismatch:t.stepMismatch,tooLong:t.tooLong,tooShort:t.tooShort,typeMismatch:t.typeMismatch,valueMissing:t.valueMissing,valid:t.valid}}function ae(e){return{isInvalid:!e.validity.valid,validationDetails:te(e),validationErrors:e.validationMessage?[e.validationMessage]:[]}}function ie(e){for(let t=0;t<e.elements.length;t++){let a=e.elements[t];if(!a.validity.valid)return a}return null}var R=Symbol("default");function re(e){const t=o.useRef(null),a=o.useRef(void 0),r=o.useCallback(n=>{if(typeof e=="function"){const i=e,d=i(n);return()=>{typeof d=="function"?d():i(null)}}else if(e)return e.current=n,()=>{e.current=null}},[e]);return o.useMemo(()=>({get current(){return t.current},set current(n){t.current=n,a.current&&(a.current(),a.current=void 0),n!=null&&(a.current=r(n))}}),[r])}function ne(e,t){let a=o.useContext(e);if(t===null)return null;if(a&&typeof a=="object"&&"slots"in a&&a.slots){let r=new Intl.ListFormat().format(Object.keys(a.slots).map(i=>`"${i}"`));if(!t&&!a.slots[R])throw new Error(`A slot prop is required. Valid slot names are ${r}.`);let n=t||R;if(!a.slots[n])throw new Error(`Invalid slot "${t}". Valid slot names are ${r}.`);return a.slots[n]}return a}function le(e,t,a){let r=ne(a,e.slot)||{},{ref:n,...i}=r,d=re(o.useMemo(()=>W(t,n),[t,n])),u=Z(i,e);return"style"in i&&i.style&&"style"in e&&e.style&&(typeof i.style=="function"||typeof e.style=="function"?u.style=c=>{let s=typeof i.style=="function"?i.style(c):i.style,l={...c.defaultStyle,...s},v=typeof e.style=="function"?e.style({...c,defaultStyle:l}):e.style;return{...l,...v}}:u.style={...i.style,...e.style}),[u,d]}var j=o.createContext(null),me=o.forwardRef(function(t,a){[t,a]=le(t,a,j);let{validationErrors:r,validationBehavior:n="native",children:i,className:d,...u}=t;const c=o.useMemo(()=>J({className:d}),[d]);return h.jsx("form",{noValidate:n!=="native",...u,ref:a,className:c,children:h.jsx(j.Provider,{value:{...t,validationBehavior:n},children:h.jsx(O.Provider,{value:r??{},children:i})})})});export{fe as $,me as F,ve as a,ce as b,$e as c,j as d,D as e,m as f,ne as u};
