import{c as F,bJ as M,bf as B,bh as k,u as N,a as S,bF as v,bK as V,j as s,b as _}from"./index-BXNQNpKr.js";import{u as E}from"./index-BIbIQJfX.js";import{B as I,c as $,a as O,b as R}from"./BlueFadeBackground-BROw9-gH.js";import{G as A,B as C}from"./BasicLayout-YiLcP-zT.js";import{o as D,e as T,u as G,I as J,F as L}from"./InputField-B8ft1lfO.js";import{F as Q}from"./EnvelopeIcon-DfZ-TGOk.js";import{s as P}from"./chunk-AWMMSYR4-BkuIuGGe.js";import{F as U}from"./XMarkIcon-DDOykHSw.js";import"./useLabels-BQHqNUR4.js";import"./chunk-ICU6NNET-DbrP49Rb.js";async function W(t){try{await B.post("/api/users/forgot-password",{email:t})}catch(e){throw k.create(e)}}function Y(){const t=F.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationFn:q},t[0]=e):e=t[0],M(e)}async function q(t){await W(t)}function K(){const t=F.c(13),{appName:e}=v(),o=N(),b=S(),{isPending:i,mutateAsync:l}=Y();let u;t[0]!==o?(u=function(){console.log("handleBack"),o("/login")},t[0]=o,t[1]=u):u=t[1];const f=u;let r;t[2]!==b||t[3]!==o||t[4]!==l?(r=async function(d){const{email:p}=d;try{await l(p),o("/")}catch{V({title:b.formatMessage({description:"ForgotPasswordPage - Forgot password error alert title",defaultMessage:"Something went wrong",id:"gmuIUo"})})}},t[2]=b,t[3]=o,t[4]=l,t[5]=r):r=t[5];const n=r;let c;t[6]!==n||t[7]!==i?(c={loading:i,onSubmit:n},t[6]=n,t[7]=i,t[8]=c):c=t[8];let a;return t[9]!==e||t[10]!==f||t[11]!==c?(a={appName:e,onBack:f,resetForm:c},t[9]=e,t[10]=f,t[11]=c,t[12]=a):a=t[12],a}function Z(t){const e=F.c(28),{loading:o,onSubmit:b}=t,i=S();let l;e[0]!==i?(l=D({email:T(i.formatMessage({description:"ForgotPasswordFormValidation - Email must be valid",defaultMessage:"Email must be valid",id:"4lmP9Q"}))}),e[0]=i,e[1]=l):l=e[1];const u=l;let f;e[2]===Symbol.for("react.memo_cache_sentinel")?(f={email:""},e[2]=f):f=e[2];let r;e[3]!==u?(r={onSubmit:u},e[3]=u,e[4]=r):r=e[4];let n;e[5]!==b?(n=async x=>{const{value:y}=x;b(y)},e[5]=b,e[6]=n):n=e[6];let c;e[7]!==r||e[8]!==n?(c={defaultValues:f,validators:r,onSubmit:n},e[7]=r,e[8]=n,e[9]=c):c=e[9];const a=G(c);let m;e[10]!==a?(m=x=>{x.preventDefault(),x.stopPropagation(),a.handleSubmit()},e[10]=a,e[11]=m):m=e[11];let d;e[12]!==i?(d=x=>s.jsx(J,{autoFocus:!0,field:x,type:"email",fullWidth:!0,label:i.formatMessage({description:"ForgotPasswordFormValidation - Email label",defaultMessage:"Email",id:"0YmbIp"}),startContent:s.jsx(Q,{className:"h-5 w-5"}),"data-testid":"forgot-password-form__email-input"}),e[12]=i,e[13]=d):d=e[13];let p;e[14]!==a.Field||e[15]!==d?(p=s.jsx(a.Field,{name:"email",children:d}),e[14]=a.Field,e[15]=d,e[16]=p):p=e[16];let w;e[17]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx(P,{}),e[17]=w):w=e[17];let g;e[18]!==i||e[19]!==o?(g=x=>{const[y]=x;return s.jsx(_,{isLoading:o,disabled:!y,color:"primary",type:"submit",title:i.formatMessage({description:"ForgotPasswordFormValidation - Send button title",defaultMessage:"Submit",id:"ojcPit"}),"aria-label":i.formatMessage({description:"ForgotPasswordFormValidation - Send button title",defaultMessage:"Submit",id:"ojcPit"}),"data-testid":"forgot-password-form__submit-button",children:i.formatMessage({description:"ForgotPasswordFormValidation - Send",defaultMessage:"Send",id:"r3YQJ5"})})},e[18]=i,e[19]=o,e[20]=g):g=e[20];let h;e[21]!==a.Subscribe||e[22]!==g?(h=s.jsx(a.Subscribe,{selector:z,children:g}),e[21]=a.Subscribe,e[22]=g,e[23]=h):h=e[23];let j;return e[24]!==h||e[25]!==m||e[26]!==p?(j=s.jsxs(L,{onSubmit:m,className:"md:min-w-sm",children:[p,w,h]}),e[24]=h,e[25]=m,e[26]=p,e[27]=j):j=e[27],j}function z(t){return[t.canSubmit]}function H(t){const e=F.c(25),{appName:o,resetForm:b,onBack:i}=t,l=S();let u;e[0]===Symbol.for("react.memo_cache_sentinel")?(u=s.jsxs(s.Fragment,{children:[s.jsx(I,{}),s.jsx(A,{})]}),e[0]=u):u=e[0];let f;e[1]===Symbol.for("react.memo_cache_sentinel")?(f=s.jsx("div",{className:"flex"}),e[1]=f):f=e[1];let r;e[2]!==l?(r=l.formatMessage({description:"AboutView - Back button title",defaultMessage:"Back",id:"72q+Ui"}),e[2]=l,e[3]=r):r=e[3];let n;e[4]!==l?(n=l.formatMessage({description:"AboutView - Back button aria label",defaultMessage:"Back",id:"ZTBga3"}),e[4]=l,e[5]=n):n=e[5];let c;e[6]===Symbol.for("react.memo_cache_sentinel")?(c=s.jsx(U,{className:"h-6 w-6"}),e[6]=c):c=e[6];let a;e[7]!==i||e[8]!==r||e[9]!==n?(a=s.jsxs($,{className:"flex w-full items-end justify-between",children:[f,s.jsx(_,{isIconOnly:!0,onPress:i,title:r,"aria-label":n,children:c})]}),e[7]=i,e[8]=r,e[9]=n,e[10]=a):a=e[10];let m;e[11]!==o||e[12]!==l?(m=l.formatMessage({description:"ForgotPasswordView - Reset password description",defaultMessage:"Enter your {appName} email adress that you used to register. We'll send you an email with your username and a link to reset your password.",id:"02xDV+"},{appName:o}),e[11]=o,e[12]=l,e[13]=m):m=e[13];let d;e[14]!==m?(d=s.jsx("span",{className:"mt-8 p-4 text-center text-base",children:m}),e[14]=m,e[15]=d):d=e[15];let p;e[16]===Symbol.for("react.memo_cache_sentinel")?(p=s.jsx(P,{y:4}),e[16]=p):p=e[16];let w;e[17]!==b?(w=s.jsx(Z,{...b}),e[17]=b,e[18]=w):w=e[18];let g;e[19]!==w||e[20]!==d?(g=s.jsxs(O,{className:"flex flex-col items-center",children:[d,p,w]}),e[19]=w,e[20]=d,e[21]=g):g=e[21];let h;return e[22]!==g||e[23]!==a?(h=s.jsx(C,{backgroundElement:u,children:s.jsx("div",{className:"flex w-full flex-col items-center justify-center gap-1 p-4 lg:flex-row-reverse",children:s.jsx("div",{className:"h-full min-h-[550px] w-full shrink-0 sm:w-[550px]",children:s.jsxs(R,{className:"min-h-[550px]",children:[a,g]})})})}),e[22]=g,e[23]=a,e[24]=h):h=e[24],h}function ce(){const t=F.c(2);E("Forgot Password");const e=K();let o;return t[0]!==e?(o=s.jsx(H,{...e}),t[0]=e,t[1]=o):o=t[1],o}export{ce as Component};
