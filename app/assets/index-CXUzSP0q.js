import{bz as ke,W as b,dy as st,dz as Ve,cg as ot,bx as L,bA as z,c6 as ct,dA as at,dB as A,dC as Se,bE as O,dD as U,dE as ne,dv as ut,dF as dt,dG as Ge,dH as ft,dI as we,c5 as ht,dJ as pt,dK as Ye,dL as Je,dM as vt}from"./index-BkDfcGXb.js";import{$ as bt,g as Xe,e as ie,j as ce,c as mt,a as Ze,b as yt}from"./chunk-YZ6YLE2T-AVNVSijw.js";const Ie=new WeakMap;function gt(i){let t=Ie.get(i);return t||(t=new Ve(i),Ie.set(i,t)),t}function $t(i,t){return t&&Ve.getGlobalDictionaryForPackage(t)||gt(i)}function fn(i,t){let{locale:e}=ke(),n=$t(i,t);return b.useMemo(()=>new st(e,n),[e,n])}class St{get currentNode(){return this._currentNode}set currentNode(t){if(!L(this.root,t))throw new Error("Cannot set currentNode to a node that is not contained by the root node.");const e=[];let n=t,l=t;for(this._currentNode=t;n&&n!==this.root;)if(n.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const s=n,o=this._doc.createTreeWalker(s,this.whatToShow,{acceptNode:this._acceptNode});e.push(o),o.currentNode=l,this._currentSetFor.add(o),n=l=s.host}else n=n.parentNode;const r=this._doc.createTreeWalker(this.root,this.whatToShow,{acceptNode:this._acceptNode});e.push(r),r.currentNode=l,this._currentSetFor.add(r),this._walkerStack=e}get doc(){return this._doc}firstChild(){let t=this.currentNode,e=this.nextNode();return L(t,e)?(e&&(this.currentNode=e),e):(this.currentNode=t,null)}lastChild(){let e=this._walkerStack[0].lastChild();return e&&(this.currentNode=e),e}nextNode(){const t=this._walkerStack[0].nextNode();if(t){if(t.shadowRoot){var e;let l;if(typeof this.filter=="function"?l=this.filter(t):!((e=this.filter)===null||e===void 0)&&e.acceptNode&&(l=this.filter.acceptNode(t)),l===NodeFilter.FILTER_ACCEPT)return this.currentNode=t,t;let r=this.nextNode();return r&&(this.currentNode=r),r}return t&&(this.currentNode=t),t}else if(this._walkerStack.length>1){this._walkerStack.shift();let n=this.nextNode();return n&&(this.currentNode=n),n}else return null}previousNode(){const t=this._walkerStack[0];if(t.currentNode===t.root){if(this._currentSetFor.has(t))if(this._currentSetFor.delete(t),this._walkerStack.length>1){this._walkerStack.shift();let l=this.previousNode();return l&&(this.currentNode=l),l}else return null;return null}const e=t.previousNode();if(e){if(e.shadowRoot){var n;let r;if(typeof this.filter=="function"?r=this.filter(e):!((n=this.filter)===null||n===void 0)&&n.acceptNode&&(r=this.filter.acceptNode(e)),r===NodeFilter.FILTER_ACCEPT)return e&&(this.currentNode=e),e;let s=this.lastChild();return s&&(this.currentNode=s),s}return e&&(this.currentNode=e),e}else if(this._walkerStack.length>1){this._walkerStack.shift();let l=this.previousNode();return l&&(this.currentNode=l),l}else return null}nextSibling(){return null}previousSibling(){return null}parentNode(){return null}constructor(t,e,n,l){this._walkerStack=[],this._currentSetFor=new Set,this._acceptNode=s=>{if(s.nodeType===Node.ELEMENT_NODE){const c=s.shadowRoot;if(c){const a=this._doc.createTreeWalker(c,this.whatToShow,{acceptNode:this._acceptNode});return this._walkerStack.unshift(a),NodeFilter.FILTER_ACCEPT}else{var o;if(typeof this.filter=="function")return this.filter(s);if(!((o=this.filter)===null||o===void 0)&&o.acceptNode)return this.filter.acceptNode(s);if(this.filter===null)return NodeFilter.FILTER_ACCEPT}}return NodeFilter.FILTER_SKIP},this._doc=t,this.root=e,this.filter=l??null,this.whatToShow=n??NodeFilter.SHOW_ALL,this._currentNode=e,this._walkerStack.unshift(t.createTreeWalker(e,n,this._acceptNode));const r=e.shadowRoot;if(r){const s=this._doc.createTreeWalker(r,this.whatToShow,{acceptNode:this._acceptNode});this._walkerStack.unshift(s)}}}function wt(i,t,e,n){return ot()?new St(i,t,e,n):i.createTreeWalker(t,e,n)}function Me(i,t){const e=b.useRef(!0),n=b.useRef(null);z(()=>(e.current=!0,()=>{e.current=!1}),[]),z(()=>{e.current?e.current=!1:(!n.current||t.some((l,r)=>!Object.is(l,n[r])))&&i(),n.current=t},t)}function Ee(i,t){if(!i)return!1;let e=window.getComputedStyle(i),n=/(auto|scroll)/.test(e.overflow+e.overflowX+e.overflowY);return n&&t&&(n=i.scrollHeight!==i.clientHeight||i.scrollWidth!==i.clientWidth),n}function hn(i,t){let e=i;for(Ee(e,t)&&(e=e.parentElement);e&&!Ee(e,t);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}function Et(i,t){const e=[];for(;i&&i!==document.documentElement;)Ee(i,t)&&e.push(i),i=i.parentElement;return e}function le(i){return ct()?i.metaKey:i.ctrlKey}const xt=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function pn(i){return i instanceof HTMLInputElement&&!xt.has(i.type)||i instanceof HTMLTextAreaElement||i instanceof HTMLElement&&i.isContentEditable}let Tt=0;const be=new Map;function Kt(i){let[t,e]=b.useState();return z(()=>{if(!i)return;let n=be.get(i);if(n)e(n.element.id);else{let l=`react-aria-description-${Tt++}`;e(l);let r=document.createElement("div");r.id=l,r.style.display="none",r.textContent=i,document.body.appendChild(r),n={refCount:0,element:r},be.set(i,n)}return n.refCount++,()=>{n&&--n.refCount===0&&(n.element.remove(),be.delete(i))}},[i]),{"aria-describedby":i?t:void 0}}function se(i,t,e,n){let l=bt(e),r=e==null;b.useEffect(()=>{if(r||!i.current)return;let s=i.current;return s.addEventListener(t,l,n),()=>{s.removeEventListener(t,l,n)}},[i,t,n,r])}function Qe(i,t){let e=Pe(i,t,"left"),n=Pe(i,t,"top"),l=t.offsetWidth,r=t.offsetHeight,s=i.scrollLeft,o=i.scrollTop,{borderTopWidth:c,borderLeftWidth:a,scrollPaddingTop:v,scrollPaddingRight:d,scrollPaddingBottom:f,scrollPaddingLeft:h}=getComputedStyle(i),m=s+parseInt(a,10),E=o+parseInt(c,10),$=m+i.clientWidth,w=E+i.clientHeight,S=parseInt(v,10)||0,T=parseInt(f,10)||0,K=parseInt(d,10)||0,N=parseInt(h,10)||0;e<=s+N?s=e-parseInt(a,10)-N:e+l>$-K&&(s+=e+l-$+K),n<=E+S?o=n-parseInt(c,10)-S:n+r>w-T&&(o+=n+r-w+T),i.scrollLeft=s,i.scrollTop=o}function Pe(i,t,e){const n=e==="left"?"offsetLeft":"offsetTop";let l=0;for(;t.offsetParent&&(l+=t[n],t.offsetParent!==i);){if(L(t.offsetParent,i)){l-=i[n];break}t=t.offsetParent}return l}function Re(i,t){if(i&&L(document,i)){let s=document.scrollingElement||document.documentElement,o=window.getComputedStyle(s).overflow==="hidden";if(o){let c=Et(i);o||c.push(s);for(let a of c)Qe(a,i)}else{var e;let{left:c,top:a}=i.getBoundingClientRect();i==null||(e=i.scrollIntoView)===null||e===void 0||e.call(i,{block:"nearest"});let{left:v,top:d}=i.getBoundingClientRect();if(Math.abs(c-v)>1||Math.abs(a-d)>1){var n,l,r;t==null||(l=t.containingElement)===null||l===void 0||(n=l.scrollIntoView)===null||n===void 0||n.call(l,{block:"center",inline:"center"}),(r=i.scrollIntoView)===null||r===void 0||r.call(i,{block:"nearest"})}}}}const Ft="react-aria-clear-focus",kt="react-aria-focus";let me=new Map;function vn(i){let{locale:t}=ke(),e=t+(i?Object.entries(i).sort((l,r)=>l[0]<r[0]?-1:1).join():"");if(me.has(e))return me.get(e);let n=new Intl.Collator(t,i);return me.set(e,n),n}const Ct=500;function Nt(i){let{isDisabled:t,onLongPressStart:e,onLongPressEnd:n,onLongPress:l,threshold:r=Ct,accessibilityDescription:s}=i;const o=b.useRef(void 0);let{addGlobalListener:c,removeGlobalListener:a}=at(),{pressProps:v}=Xe({isDisabled:t,onPressStart(f){if(f.continuePropagation(),(f.pointerType==="mouse"||f.pointerType==="touch")&&(e&&e({...f,type:"longpressstart"}),o.current=setTimeout(()=>{f.target.dispatchEvent(new PointerEvent("pointercancel",{bubbles:!0})),A(f.target).activeElement!==f.target&&Se(f.target),l&&l({...f,type:"longpress"}),o.current=void 0},r),f.pointerType==="touch")){let h=m=>{m.preventDefault()};c(f.target,"contextmenu",h,{once:!0}),c(window,"pointerup",()=>{setTimeout(()=>{a(f.target,"contextmenu",h)},30)},{once:!0})}},onPressEnd(f){o.current&&clearTimeout(o.current),n&&(f.pointerType==="mouse"||f.pointerType==="touch")&&n({...f,type:"longpressend"})}}),d=Kt(l&&!t?s:void 0);return{longPressProps:ie(v,d)}}const De=O.createContext(null),xe="react-aria-focus-scope-restore";let x=null;function bn(i){let{children:t,contain:e,restoreFocus:n,autoFocus:l}=i,r=b.useRef(null),s=b.useRef(null),o=b.useRef([]),{parentNode:c}=b.useContext(De)||{},a=b.useMemo(()=>new Ke({scopeRef:o}),[o]);z(()=>{let f=c||k.root;if(k.getTreeNode(f.scopeRef)&&x&&!ae(x,f.scopeRef)){let h=k.getTreeNode(x);h&&(f=h)}f.addChild(a),k.addNode(a)},[a,c]),z(()=>{let f=k.getTreeNode(o);f&&(f.contain=!!e)},[e]),z(()=>{var f;let h=(f=r.current)===null||f===void 0?void 0:f.nextSibling,m=[],E=$=>$.stopPropagation();for(;h&&h!==s.current;)m.push(h),h.addEventListener(xe,E),h=h.nextSibling;return o.current=m,()=>{for(let $ of m)$.removeEventListener(xe,E)}},[t]),Dt(o,n,e),Pt(o,e),At(o,n,e),Rt(o,l),b.useEffect(()=>{const f=U(A(o.current?o.current[0]:void 0));let h=null;if(W(f,o.current)){for(let m of k.traverse())m.scopeRef&&W(f,m.scopeRef.current)&&(h=m);h===k.getTreeNode(o)&&(x=h.scopeRef)}},[o]),z(()=>()=>{var f,h,m;let E=(m=(h=k.getTreeNode(o))===null||h===void 0||(f=h.parent)===null||f===void 0?void 0:f.scopeRef)!==null&&m!==void 0?m:null;(o===x||ae(o,x))&&(!E||k.getTreeNode(E))&&(x=E),k.removeTreeNode(o)},[o]);let v=b.useMemo(()=>It(o),[]),d=b.useMemo(()=>({focusManager:v,parentNode:a}),[a,v]);return O.createElement(De.Provider,{value:d},O.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:r}),t,O.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:s}))}function It(i){return{focusNext(t={}){let e=i.current,{from:n,tabbable:l,wrap:r,accept:s}=t;var o;let c=n||U(A((o=e[0])!==null&&o!==void 0?o:void 0)),a=e[0].previousElementSibling,v=Q(e),d=G(v,{tabbable:l,accept:s},e);d.currentNode=W(c,e)?c:a;let f=d.nextNode();return!f&&r&&(d.currentNode=a,f=d.nextNode()),f&&V(f,!0),f},focusPrevious(t={}){let e=i.current,{from:n,tabbable:l,wrap:r,accept:s}=t;var o;let c=n||U(A((o=e[0])!==null&&o!==void 0?o:void 0)),a=e[e.length-1].nextElementSibling,v=Q(e),d=G(v,{tabbable:l,accept:s},e);d.currentNode=W(c,e)?c:a;let f=d.previousNode();return!f&&r&&(d.currentNode=a,f=d.previousNode()),f&&V(f,!0),f},focusFirst(t={}){let e=i.current,{tabbable:n,accept:l}=t,r=Q(e),s=G(r,{tabbable:n,accept:l},e);s.currentNode=e[0].previousElementSibling;let o=s.nextNode();return o&&V(o,!0),o},focusLast(t={}){let e=i.current,{tabbable:n,accept:l}=t,r=Q(e),s=G(r,{tabbable:n,accept:l},e);s.currentNode=e[e.length-1].nextElementSibling;let o=s.previousNode();return o&&V(o,!0),o}}}function Q(i){return i[0].parentElement}function re(i){let t=k.getTreeNode(x);for(;t&&t.scopeRef!==i;){if(t.contain)return!1;t=t.parent}return!0}function Mt(i){if(i.checked)return!0;let t=[];if(!i.form)t=[...A(i).querySelectorAll(`input[type="radio"][name="${CSS.escape(i.name)}"]`)].filter(r=>!r.form);else{var e,n;let r=(n=i.form)===null||n===void 0||(e=n.elements)===null||e===void 0?void 0:e.namedItem(i.name);t=[...r??[]]}return t?!t.some(r=>r.checked):!1}function Pt(i,t){let e=b.useRef(void 0),n=b.useRef(void 0);z(()=>{let l=i.current;if(!t){n.current&&(cancelAnimationFrame(n.current),n.current=void 0);return}const r=A(l?l[0]:void 0);let s=a=>{if(a.key!=="Tab"||a.altKey||a.ctrlKey||a.metaKey||!re(i)||a.isComposing)return;let v=U(r),d=i.current;if(!d||!W(v,d))return;let f=Q(d),h=G(f,{tabbable:!0},d);if(!v)return;h.currentNode=v;let m=a.shiftKey?h.previousNode():h.nextNode();m||(h.currentNode=a.shiftKey?d[d.length-1].nextElementSibling:d[0].previousElementSibling,m=a.shiftKey?h.previousNode():h.nextNode()),a.preventDefault(),m&&V(m,!0)},o=a=>{(!x||ae(x,i))&&W(ne(a),i.current)?(x=i,e.current=ne(a)):re(i)&&!_(ne(a),i)?e.current?e.current.focus():x&&x.current&&Te(x.current):re(i)&&(e.current=ne(a))},c=a=>{n.current&&cancelAnimationFrame(n.current),n.current=requestAnimationFrame(()=>{let v=we(),d=(v==="virtual"||v===null)&&ut()&&dt(),f=U(r);if(!d&&f&&re(i)&&!_(f,i)){x=i;let m=ne(a);if(m&&m.isConnected){var h;e.current=m,(h=e.current)===null||h===void 0||h.focus()}else x.current&&Te(x.current)}})};return r.addEventListener("keydown",s,!1),r.addEventListener("focusin",o,!1),l?.forEach(a=>a.addEventListener("focusin",o,!1)),l?.forEach(a=>a.addEventListener("focusout",c,!1)),()=>{r.removeEventListener("keydown",s,!1),r.removeEventListener("focusin",o,!1),l?.forEach(a=>a.removeEventListener("focusin",o,!1)),l?.forEach(a=>a.removeEventListener("focusout",c,!1))}},[i,t]),z(()=>()=>{n.current&&cancelAnimationFrame(n.current)},[n])}function _e(i){return _(i)}function W(i,t){return!i||!t?!1:t.some(e=>L(e,i))}function _(i,t=null){if(i instanceof Element&&i.closest("[data-react-aria-top-layer]"))return!0;for(let{scopeRef:e}of k.traverse(k.getTreeNode(t)))if(e&&W(i,e.current))return!0;return!1}function ae(i,t){var e;let n=(e=k.getTreeNode(t))===null||e===void 0?void 0:e.parent;for(;n;){if(n.scopeRef===i)return!0;n=n.parent}return!1}function V(i,t=!1){if(i!=null&&!t)try{ce(i)}catch{}else if(i!=null)try{i.focus()}catch{}}function et(i,t=!0){let e=i[0].previousElementSibling,n=Q(i),l=G(n,{tabbable:t},i);l.currentNode=e;let r=l.nextNode();return t&&!r&&(n=Q(i),l=G(n,{tabbable:!1},i),l.currentNode=e,r=l.nextNode()),r}function Te(i,t=!0){V(et(i,t))}function Rt(i,t){const e=O.useRef(t);b.useEffect(()=>{if(e.current){x=i;const n=A(i.current?i.current[0]:void 0);!W(U(n),x.current)&&i.current&&Te(i.current)}e.current=!1},[i])}function Dt(i,t,e){z(()=>{if(t||e)return;let n=i.current;const l=A(n?n[0]:void 0);let r=s=>{let o=ne(s);W(o,i.current)?x=i:_e(o)||(x=null)};return l.addEventListener("focusin",r,!1),n?.forEach(s=>s.addEventListener("focusin",r,!1)),()=>{l.removeEventListener("focusin",r,!1),n?.forEach(s=>s.removeEventListener("focusin",r,!1))}},[i,t,e])}function Ae(i){let t=k.getTreeNode(x);for(;t&&t.scopeRef!==i;){if(t.nodeToRestore)return!1;t=t.parent}return t?.scopeRef===i}function At(i,t,e){const n=b.useRef(typeof document<"u"?U(A(i.current?i.current[0]:void 0)):null);z(()=>{let l=i.current;const r=A(l?l[0]:void 0);if(!t||e)return;let s=()=>{(!x||ae(x,i))&&W(U(r),i.current)&&(x=i)};return r.addEventListener("focusin",s,!1),l?.forEach(o=>o.addEventListener("focusin",s,!1)),()=>{r.removeEventListener("focusin",s,!1),l?.forEach(o=>o.removeEventListener("focusin",s,!1))}},[i,e]),z(()=>{const l=A(i.current?i.current[0]:void 0);if(!t)return;let r=s=>{if(s.key!=="Tab"||s.altKey||s.ctrlKey||s.metaKey||!re(i)||s.isComposing)return;let o=l.activeElement;if(!_(o,i)||!Ae(i))return;let c=k.getTreeNode(i);if(!c)return;let a=c.nodeToRestore,v=G(l.body,{tabbable:!0});v.currentNode=o;let d=s.shiftKey?v.previousNode():v.nextNode();if((!a||!a.isConnected||a===l.body)&&(a=void 0,c.nodeToRestore=void 0),(!d||!_(d,i))&&a){v.currentNode=a;do d=s.shiftKey?v.previousNode():v.nextNode();while(_(d,i));s.preventDefault(),s.stopPropagation(),d?V(d,!0):_e(a)?V(a,!0):o.blur()}};return e||l.addEventListener("keydown",r,!0),()=>{e||l.removeEventListener("keydown",r,!0)}},[i,t,e]),z(()=>{const l=A(i.current?i.current[0]:void 0);if(!t)return;let r=k.getTreeNode(i);if(r){var s;return r.nodeToRestore=(s=n.current)!==null&&s!==void 0?s:void 0,()=>{let o=k.getTreeNode(i);if(!o)return;let c=o.nodeToRestore,a=U(l);if(t&&c&&(a&&_(a,i)||a===l.body&&Ae(i))){let v=k.clone();requestAnimationFrame(()=>{if(l.activeElement===l.body){let d=v.getTreeNode(i);for(;d;){if(d.nodeToRestore&&d.nodeToRestore.isConnected){Oe(d.nodeToRestore);return}d=d.parent}for(d=v.getTreeNode(i);d;){if(d.scopeRef&&d.scopeRef.current&&k.getTreeNode(d.scopeRef)){let f=et(d.scopeRef.current,!0);Oe(f);return}d=d.parent}}})}}}},[i,t])}function Oe(i){i.dispatchEvent(new CustomEvent(xe,{bubbles:!0,cancelable:!0}))&&V(i)}function G(i,t,e){let n=t?.tabbable?Ge:ft,l=i?.nodeType===Node.ELEMENT_NODE?i:null,r=A(l),s=wt(r,i||r,NodeFilter.SHOW_ELEMENT,{acceptNode(o){return L(t?.from,o)||t?.tabbable&&o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(!Mt(o)||s.currentNode.tagName==="INPUT"&&s.currentNode.type==="radio"&&s.currentNode.name===o.name)?NodeFilter.FILTER_REJECT:n(o)&&(!e||W(o,e))&&(!t?.accept||t.accept(o))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return t?.from&&(s.currentNode=t.from),s}class Ce{get size(){return this.fastMap.size}getTreeNode(t){return this.fastMap.get(t)}addTreeNode(t,e,n){let l=this.fastMap.get(e??null);if(!l)return;let r=new Ke({scopeRef:t});l.addChild(r),r.parent=l,this.fastMap.set(t,r),n&&(r.nodeToRestore=n)}addNode(t){this.fastMap.set(t.scopeRef,t)}removeTreeNode(t){if(t===null)return;let e=this.fastMap.get(t);if(!e)return;let n=e.parent;for(let r of this.traverse())r!==e&&e.nodeToRestore&&r.nodeToRestore&&e.scopeRef&&e.scopeRef.current&&W(r.nodeToRestore,e.scopeRef.current)&&(r.nodeToRestore=e.nodeToRestore);let l=e.children;n&&(n.removeChild(e),l.size>0&&l.forEach(r=>n&&n.addChild(r))),this.fastMap.delete(e.scopeRef)}*traverse(t=this.root){if(t.scopeRef!=null&&(yield t),t.children.size>0)for(let e of t.children)yield*this.traverse(e)}clone(){var t;let e=new Ce;var n;for(let l of this.traverse())e.addTreeNode(l.scopeRef,(n=(t=l.parent)===null||t===void 0?void 0:t.scopeRef)!==null&&n!==void 0?n:null,l.nodeToRestore);return e}constructor(){this.fastMap=new Map,this.root=new Ke({scopeRef:null}),this.fastMap.set(null,this.root)}}class Ke{addChild(t){this.children.add(t),t.parent=this}removeChild(t){this.children.delete(t),t.parent=void 0}constructor(t){this.children=new Set,this.contain=!1,this.scopeRef=t.scopeRef}}let k=new Ce;function tt(i){let t=Lt(A(i));t!==i&&(t&&Ot(t,i),i&&nt(i,t))}function Ot(i,t){i.dispatchEvent(new FocusEvent("blur",{relatedTarget:t})),i.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:t}))}function nt(i,t){i.dispatchEvent(new FocusEvent("focus",{relatedTarget:t})),i.dispatchEvent(new FocusEvent("focusin",{bubbles:!0,relatedTarget:t}))}function Lt(i){let t=U(i),e=t?.getAttribute("aria-activedescendant");return e&&i.getElementById(e)||t}const Le={border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"};function zt(i={}){let{style:t,isFocusable:e}=i,[n,l]=b.useState(!1),{focusWithinProps:r}=ht({isDisabled:!e,onFocusWithinChange:o=>l(o)}),s=b.useMemo(()=>n?t:t?{...Le,...t}:Le,[n]);return{visuallyHiddenProps:{...r,style:s}}}function mn(i){let{children:t,elementType:e="div",isFocusable:n,style:l,...r}=i,{visuallyHiddenProps:s}=zt(i);return O.createElement(e,ie(r,s),t)}class H extends Set{constructor(t,e,n){super(t),t instanceof H?(this.anchorKey=e??t.anchorKey,this.currentKey=n??t.currentKey):(this.anchorKey=e??null,this.currentKey=n??null)}}function Bt(i,t){if(i.size!==t.size)return!1;for(let e of i)if(!t.has(e))return!1;return!0}function yn(i){let{selectionMode:t="none",disallowEmptySelection:e=!1,allowDuplicateSelectionEvents:n,selectionBehavior:l="toggle",disabledBehavior:r="all"}=i,s=b.useRef(!1),[,o]=b.useState(!1),c=b.useRef(null),a=b.useRef(null),[,v]=b.useState(null),d=b.useMemo(()=>ze(i.selectedKeys),[i.selectedKeys]),f=b.useMemo(()=>ze(i.defaultSelectedKeys,new H),[i.defaultSelectedKeys]),[h,m]=mt(d,f,i.onSelectionChange),E=b.useMemo(()=>i.disabledKeys?new Set(i.disabledKeys):new Set,[i.disabledKeys]),[$,w]=b.useState(l);l==="replace"&&$==="toggle"&&typeof h=="object"&&h.size===0&&w("replace");let S=b.useRef(l);return b.useEffect(()=>{l!==S.current&&(w(l),S.current=l)},[l]),{selectionMode:t,disallowEmptySelection:e,selectionBehavior:$,setSelectionBehavior:w,get isFocused(){return s.current},setFocused(T){s.current=T,o(T)},get focusedKey(){return c.current},get childFocusStrategy(){return a.current},setFocusedKey(T,K="first"){c.current=T,a.current=K,v(T)},selectedKeys:h,setSelectedKeys(T){(n||!Bt(T,h))&&m(T)},disabledKeys:E,disabledBehavior:r}}function ze(i,t){return i?i==="all"?"all":new H(i):t}class Wt{build(t,e){return this.context=e,Be(()=>this.iterateCollection(t))}*iterateCollection(t){let{children:e,items:n}=t;if(O.isValidElement(e)&&e.type===O.Fragment)yield*this.iterateCollection({children:e.props.children,items:n});else if(typeof e=="function"){if(!n)throw new Error("props.children was a function but props.items is missing");let l=0;for(let r of n)yield*this.getFullNode({value:r,index:l},{renderer:e}),l++}else{let l=[];O.Children.forEach(e,s=>{s&&l.push(s)});let r=0;for(let s of l){let o=this.getFullNode({element:s,index:r},{});for(let c of o)r++,yield c}}}getKey(t,e,n,l){if(t.key!=null)return t.key;if(e.type==="cell"&&e.key!=null)return`${l}${e.key}`;let r=e.value;if(r!=null){var s;let o=(s=r.key)!==null&&s!==void 0?s:r.id;if(o==null)throw new Error("No key found for item");return o}return l?`${l}.${e.index}`:`$.${e.index}`}getChildState(t,e){return{renderer:e.renderer||t.renderer}}*getFullNode(t,e,n,l){if(O.isValidElement(t.element)&&t.element.type===O.Fragment){let $=[];O.Children.forEach(t.element.props.children,S=>{$.push(S)});var r;let w=(r=t.index)!==null&&r!==void 0?r:0;for(const S of $)yield*this.getFullNode({element:S,index:w++},e,n,l);return}let s=t.element;if(!s&&t.value&&e&&e.renderer){let $=this.cache.get(t.value);if($&&(!$.shouldInvalidate||!$.shouldInvalidate(this.context))){$.index=t.index,$.parentKey=l?l.key:null,yield $;return}s=e.renderer(t.value)}if(O.isValidElement(s)){let $=s.type;if(typeof $!="function"&&typeof $.getCollectionNode!="function"){let K=s.type;throw new Error(`Unknown element <${K}> in collection.`)}let w=$.getCollectionNode(s.props,this.context);var o;let S=(o=t.index)!==null&&o!==void 0?o:0,T=w.next();for(;!T.done&&T.value;){let K=T.value;t.index=S;var c;let N=(c=K.key)!==null&&c!==void 0?c:null;N==null&&(N=K.element?null:this.getKey(s,t,e,n));let B=[...this.getFullNode({...K,key:N,index:S,wrapper:Ht(t.wrapper,K.wrapper)},this.getChildState(e,K),n?`${n}${s.key}`:s.key,l)];for(let I of B){var a,v;I.value=(v=(a=K.value)!==null&&a!==void 0?a:t.value)!==null&&v!==void 0?v:null,I.value&&this.cache.set(I.value,I);var d;if(t.type&&I.type!==t.type)throw new Error(`Unsupported type <${ye(I.type)}> in <${ye((d=l?.type)!==null&&d!==void 0?d:"unknown parent type")}>. Only <${ye(t.type)}> is supported.`);S++,yield I}T=w.next(B)}return}if(t.key==null||t.type==null)return;let f=this;var h,m;let E={type:t.type,props:t.props,key:t.key,parentKey:l?l.key:null,value:(h=t.value)!==null&&h!==void 0?h:null,level:l?l.level+1:0,index:t.index,rendered:t.rendered,textValue:(m=t.textValue)!==null&&m!==void 0?m:"","aria-label":t["aria-label"],wrapper:t.wrapper,shouldInvalidate:t.shouldInvalidate,hasChildNodes:t.hasChildNodes||!1,childNodes:Be(function*(){if(!t.hasChildNodes||!t.childNodes)return;let $=0;for(let w of t.childNodes()){w.key!=null&&(w.key=`${E.key}${w.key}`);let S=f.getFullNode({...w,index:$},f.getChildState(e,w),E.key,E);for(let T of S)$++,yield T}})};yield E}constructor(){this.cache=new WeakMap}}function Be(i){let t=[],e=null;return{*[Symbol.iterator](){for(let n of t)yield n;e||(e=i());for(let n of e)t.push(n),yield n}}}function Ht(i,t){if(i&&t)return e=>i(t(e));if(i)return i;if(t)return t}function ye(i){return i[0].toUpperCase()+i.slice(1)}function gn(i,t,e){let n=b.useMemo(()=>new Wt,[]),{children:l,items:r,collection:s}=i;return b.useMemo(()=>{if(s)return s;let c=n.build({children:l,items:r},e);return t(c)},[n,l,r,s,e,t])}function Ut(i,t){return typeof t.getChildren=="function"?t.getChildren(i.key):i.childNodes}function jt(i){return qt(i,0)}function qt(i,t){if(t<0)return;let e=0;for(let n of i){if(e===t)return n;e++}}function $n(i){let t;for(let e of i)t=e;return t}function ge(i,t,e){if(t.parentKey===e.parentKey)return t.index-e.index;let n=[...We(i,t),t],l=[...We(i,e),e],r=n.slice(0,l.length).findIndex((s,o)=>s!==l[o]);return r!==-1?(t=n[r],e=l[r],t.index-e.index):n.findIndex(s=>s===e)>=0?1:(l.findIndex(s=>s===t)>=0,-1)}function We(i,t){let e=[],n=t;for(;n?.parentKey!=null;)n=i.getItem(n.parentKey),n&&e.unshift(n);return e}class lt{get selectionMode(){return this.state.selectionMode}get disallowEmptySelection(){return this.state.disallowEmptySelection}get selectionBehavior(){return this.state.selectionBehavior}setSelectionBehavior(t){this.state.setSelectionBehavior(t)}get isFocused(){return this.state.isFocused}setFocused(t){this.state.setFocused(t)}get focusedKey(){return this.state.focusedKey}get childFocusStrategy(){return this.state.childFocusStrategy}setFocusedKey(t,e){(t==null||this.collection.getItem(t))&&this.state.setFocusedKey(t,e)}get selectedKeys(){return this.state.selectedKeys==="all"?new Set(this.getSelectAllKeys()):this.state.selectedKeys}get rawSelection(){return this.state.selectedKeys}isSelected(t){if(this.state.selectionMode==="none")return!1;let e=this.getKey(t);return e==null?!1:this.state.selectedKeys==="all"?this.canSelectItem(e):this.state.selectedKeys.has(e)}get isEmpty(){return this.state.selectedKeys!=="all"&&this.state.selectedKeys.size===0}get isSelectAll(){if(this.isEmpty)return!1;if(this.state.selectedKeys==="all")return!0;if(this._isSelectAll!=null)return this._isSelectAll;let t=this.getSelectAllKeys(),e=this.state.selectedKeys;return this._isSelectAll=t.every(n=>e.has(n)),this._isSelectAll}get firstSelectedKey(){let t=null;for(let n of this.state.selectedKeys){let l=this.collection.getItem(n);(!t||l&&ge(this.collection,l,t)<0)&&(t=l)}var e;return(e=t?.key)!==null&&e!==void 0?e:null}get lastSelectedKey(){let t=null;for(let n of this.state.selectedKeys){let l=this.collection.getItem(n);(!t||l&&ge(this.collection,l,t)>0)&&(t=l)}var e;return(e=t?.key)!==null&&e!==void 0?e:null}get disabledKeys(){return this.state.disabledKeys}get disabledBehavior(){return this.state.disabledBehavior}extendSelection(t){if(this.selectionMode==="none")return;if(this.selectionMode==="single"){this.replaceSelection(t);return}let e=this.getKey(t);if(e==null)return;let n;if(this.state.selectedKeys==="all")n=new H([e],e,e);else{let s=this.state.selectedKeys;var l;let o=(l=s.anchorKey)!==null&&l!==void 0?l:e;n=new H(s,o,e);var r;for(let c of this.getKeyRange(o,(r=s.currentKey)!==null&&r!==void 0?r:e))n.delete(c);for(let c of this.getKeyRange(e,o))this.canSelectItem(c)&&n.add(c)}this.state.setSelectedKeys(n)}getKeyRange(t,e){let n=this.collection.getItem(t),l=this.collection.getItem(e);return n&&l?ge(this.collection,n,l)<=0?this.getKeyRangeInternal(t,e):this.getKeyRangeInternal(e,t):[]}getKeyRangeInternal(t,e){var n;if(!((n=this.layoutDelegate)===null||n===void 0)&&n.getKeyRange)return this.layoutDelegate.getKeyRange(t,e);let l=[],r=t;for(;r!=null;){let s=this.collection.getItem(r);if(s&&(s.type==="item"||s.type==="cell"&&this.allowsCellSelection)&&l.push(r),r===e)return l;r=this.collection.getKeyAfter(r)}return[]}getKey(t){let e=this.collection.getItem(t);if(!e||e.type==="cell"&&this.allowsCellSelection)return t;for(;e&&e.type!=="item"&&e.parentKey!=null;)e=this.collection.getItem(e.parentKey);return!e||e.type!=="item"?null:e.key}toggleSelection(t){if(this.selectionMode==="none")return;if(this.selectionMode==="single"&&!this.isSelected(t)){this.replaceSelection(t);return}let e=this.getKey(t);if(e==null)return;let n=new H(this.state.selectedKeys==="all"?this.getSelectAllKeys():this.state.selectedKeys);n.has(e)?n.delete(e):this.canSelectItem(e)&&(n.add(e),n.anchorKey=e,n.currentKey=e),!(this.disallowEmptySelection&&n.size===0)&&this.state.setSelectedKeys(n)}replaceSelection(t){if(this.selectionMode==="none")return;let e=this.getKey(t);if(e==null)return;let n=this.canSelectItem(e)?new H([e],e,e):new H;this.state.setSelectedKeys(n)}setSelectedKeys(t){if(this.selectionMode==="none")return;let e=new H;for(let n of t){let l=this.getKey(n);if(l!=null&&(e.add(l),this.selectionMode==="single"))break}this.state.setSelectedKeys(e)}getSelectAllKeys(){let t=[],e=n=>{for(;n!=null;){if(this.canSelectItem(n)){var l;let s=this.collection.getItem(n);s?.type==="item"&&t.push(n);var r;s?.hasChildNodes&&(this.allowsCellSelection||s.type!=="item")&&e((r=(l=jt(Ut(s,this.collection)))===null||l===void 0?void 0:l.key)!==null&&r!==void 0?r:null)}n=this.collection.getKeyAfter(n)}};return e(this.collection.getFirstKey()),t}selectAll(){!this.isSelectAll&&this.selectionMode==="multiple"&&this.state.setSelectedKeys("all")}clearSelection(){!this.disallowEmptySelection&&(this.state.selectedKeys==="all"||this.state.selectedKeys.size>0)&&this.state.setSelectedKeys(new H)}toggleSelectAll(){this.isSelectAll?this.clearSelection():this.selectAll()}select(t,e){this.selectionMode!=="none"&&(this.selectionMode==="single"?this.isSelected(t)&&!this.disallowEmptySelection?this.toggleSelection(t):this.replaceSelection(t):this.selectionBehavior==="toggle"||e&&(e.pointerType==="touch"||e.pointerType==="virtual")?this.toggleSelection(t):this.replaceSelection(t))}isSelectionEqual(t){if(t===this.state.selectedKeys)return!0;let e=this.selectedKeys;if(t.size!==e.size)return!1;for(let n of t)if(!e.has(n))return!1;for(let n of e)if(!t.has(n))return!1;return!0}canSelectItem(t){var e;if(this.state.selectionMode==="none"||this.state.disabledKeys.has(t))return!1;let n=this.collection.getItem(t);return!(!n||!(n==null||(e=n.props)===null||e===void 0)&&e.isDisabled||n.type==="cell"&&!this.allowsCellSelection)}isDisabled(t){var e,n;return this.state.disabledBehavior==="all"&&(this.state.disabledKeys.has(t)||!!(!((n=this.collection.getItem(t))===null||n===void 0||(e=n.props)===null||e===void 0)&&e.isDisabled))}isLink(t){var e,n;return!!(!((n=this.collection.getItem(t))===null||n===void 0||(e=n.props)===null||e===void 0)&&e.href)}getItemProps(t){var e;return(e=this.collection.getItem(t))===null||e===void 0?void 0:e.props}withCollection(t){return new lt(t,this.state,{allowsCellSelection:this.allowsCellSelection,layoutDelegate:this.layoutDelegate||void 0})}constructor(t,e,n){this.collection=t,this.state=e;var l;this.allowsCellSelection=(l=n?.allowsCellSelection)!==null&&l!==void 0?l:!1,this._isSelectAll=null,this.layoutDelegate=n?.layoutDelegate||null}}function Fe(i){return pt()?i.altKey:i.ctrlKey}function oe(i,t){var e,n;let l=`[data-key="${CSS.escape(String(t))}"]`,r=(e=i.current)===null||e===void 0?void 0:e.dataset.collection;return r&&(l=`[data-collection="${CSS.escape(r)}"]${l}`),(n=i.current)===null||n===void 0?void 0:n.querySelector(l)}const it=new WeakMap;function Vt(i){let t=Ze();return it.set(i,t),t}function Gt(i){return it.get(i)}const Yt=1e3;function Jt(i){let{keyboardDelegate:t,selectionManager:e,onTypeSelect:n}=i,l=b.useRef({search:"",timeout:void 0}).current,r=s=>{let o=Xt(s.key);if(!(!o||s.ctrlKey||s.metaKey||!L(s.currentTarget,s.target)||l.search.length===0&&o===" ")){if(o===" "&&l.search.trim().length>0&&(s.preventDefault(),"continuePropagation"in s||s.stopPropagation()),l.search+=o,t.getKeyForSearch!=null){let c=t.getKeyForSearch(l.search,e.focusedKey);c==null&&(c=t.getKeyForSearch(l.search)),c!=null&&(e.setFocusedKey(c),n&&n(c))}clearTimeout(l.timeout),l.timeout=setTimeout(()=>{l.search=""},Yt)}};return{typeSelectProps:{onKeyDownCapture:t.getKeyForSearch?r:void 0}}}function Xt(i){return i.length===1||!/^[A-Z]/i.test(i)?i:""}function Sn(i){let{selectionManager:t,keyboardDelegate:e,ref:n,autoFocus:l=!1,shouldFocusWrap:r=!1,disallowEmptySelection:s=!1,disallowSelectAll:o=!1,escapeKeyBehavior:c="clearSelection",selectOnFocus:a=t.selectionBehavior==="replace",disallowTypeAhead:v=!1,shouldUseVirtualFocus:d,allowsTabNavigation:f=!1,scrollRef:h=n,linkBehavior:m="action"}=i,{direction:E}=ke(),$=Ye(),w=p=>{if(p.altKey&&p.key==="Tab"&&p.preventDefault(),!n.current||!L(n.current,p.target))return;const g=(y,X)=>{if(y!=null){if(t.isLink(y)&&m==="selection"&&a&&!Fe(p)){Je.flushSync(()=>{t.setFocusedKey(y,X)});let Z=oe(n,y),Ne=t.getItemProps(y);Z&&$.open(Z,p,Ne.href,Ne.routerOptions);return}if(t.setFocusedKey(y,X),t.isLink(y)&&m==="override")return;p.shiftKey&&t.selectionMode==="multiple"?t.extendSelection(y):a&&!Fe(p)&&t.replaceSelection(y)}};switch(p.key){case"ArrowDown":if(e.getKeyBelow){var F,C,P;let y=t.focusedKey!=null?(F=e.getKeyBelow)===null||F===void 0?void 0:F.call(e,t.focusedKey):(C=e.getFirstKey)===null||C===void 0?void 0:C.call(e);y==null&&r&&(y=(P=e.getFirstKey)===null||P===void 0?void 0:P.call(e,t.focusedKey)),y!=null&&(p.preventDefault(),g(y))}break;case"ArrowUp":if(e.getKeyAbove){var M,u,R;let y=t.focusedKey!=null?(M=e.getKeyAbove)===null||M===void 0?void 0:M.call(e,t.focusedKey):(u=e.getLastKey)===null||u===void 0?void 0:u.call(e);y==null&&r&&(y=(R=e.getLastKey)===null||R===void 0?void 0:R.call(e,t.focusedKey)),y!=null&&(p.preventDefault(),g(y))}break;case"ArrowLeft":if(e.getKeyLeftOf){var ue,de,fe;let y=t.focusedKey!=null?(ue=e.getKeyLeftOf)===null||ue===void 0?void 0:ue.call(e,t.focusedKey):null;y==null&&r&&(y=E==="rtl"?(de=e.getFirstKey)===null||de===void 0?void 0:de.call(e,t.focusedKey):(fe=e.getLastKey)===null||fe===void 0?void 0:fe.call(e,t.focusedKey)),y!=null&&(p.preventDefault(),g(y,E==="rtl"?"first":"last"))}break;case"ArrowRight":if(e.getKeyRightOf){var he,pe,ve;let y=t.focusedKey!=null?(he=e.getKeyRightOf)===null||he===void 0?void 0:he.call(e,t.focusedKey):null;y==null&&r&&(y=E==="rtl"?(pe=e.getLastKey)===null||pe===void 0?void 0:pe.call(e,t.focusedKey):(ve=e.getFirstKey)===null||ve===void 0?void 0:ve.call(e,t.focusedKey)),y!=null&&(p.preventDefault(),g(y,E==="rtl"?"last":"first"))}break;case"Home":if(e.getFirstKey){if(t.focusedKey===null&&p.shiftKey)return;p.preventDefault();let y=e.getFirstKey(t.focusedKey,le(p));t.setFocusedKey(y),y!=null&&(le(p)&&p.shiftKey&&t.selectionMode==="multiple"?t.extendSelection(y):a&&t.replaceSelection(y))}break;case"End":if(e.getLastKey){if(t.focusedKey===null&&p.shiftKey)return;p.preventDefault();let y=e.getLastKey(t.focusedKey,le(p));t.setFocusedKey(y),y!=null&&(le(p)&&p.shiftKey&&t.selectionMode==="multiple"?t.extendSelection(y):a&&t.replaceSelection(y))}break;case"PageDown":if(e.getKeyPageBelow&&t.focusedKey!=null){let y=e.getKeyPageBelow(t.focusedKey);y!=null&&(p.preventDefault(),g(y))}break;case"PageUp":if(e.getKeyPageAbove&&t.focusedKey!=null){let y=e.getKeyPageAbove(t.focusedKey);y!=null&&(p.preventDefault(),g(y))}break;case"a":le(p)&&t.selectionMode==="multiple"&&o!==!0&&(p.preventDefault(),t.selectAll());break;case"Escape":c==="clearSelection"&&!s&&t.selectedKeys.size!==0&&(p.stopPropagation(),p.preventDefault(),t.clearSelection());break;case"Tab":if(!f){if(p.shiftKey)n.current.focus();else{let y=G(n.current,{tabbable:!0}),X,Z;do Z=y.lastChild(),Z&&(X=Z);while(Z);X&&(!L(X,document.activeElement)||document.activeElement&&!Ge(document.activeElement))&&Se(X)}break}}},S=b.useRef({top:0,left:0});se(h,"scroll",()=>{var p,g,F,C;S.current={top:(F=(p=h.current)===null||p===void 0?void 0:p.scrollTop)!==null&&F!==void 0?F:0,left:(C=(g=h.current)===null||g===void 0?void 0:g.scrollLeft)!==null&&C!==void 0?C:0}});let T=p=>{if(t.isFocused){L(p.currentTarget,p.target)||t.setFocused(!1);return}if(L(p.currentTarget,p.target)){if(t.setFocused(!0),t.focusedKey==null){var g,F;let M=R=>{R!=null&&(t.setFocusedKey(R),a&&!t.isSelected(R)&&t.replaceSelection(R))},u=p.relatedTarget;var C,P;u&&p.currentTarget.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_FOLLOWING?M((C=t.lastSelectedKey)!==null&&C!==void 0?C:(g=e.getLastKey)===null||g===void 0?void 0:g.call(e)):M((P=t.firstSelectedKey)!==null&&P!==void 0?P:(F=e.getFirstKey)===null||F===void 0?void 0:F.call(e))}else h.current&&(h.current.scrollTop=S.current.top,h.current.scrollLeft=S.current.left);if(t.focusedKey!=null&&h.current){let M=oe(n,t.focusedKey);M instanceof HTMLElement&&(!L(M,document.activeElement)&&!d&&Se(M),we()==="keyboard"&&Re(M,{containingElement:n.current}))}}},K=p=>{L(p.currentTarget,p.relatedTarget)||t.setFocused(!1)},N=b.useRef(!1);se(n,kt,d?p=>{let{detail:g}=p;p.stopPropagation(),t.setFocused(!0),g?.focusStrategy==="first"&&(N.current=!0)}:void 0),Me(()=>{if(N.current){var p,g;let F=(g=(p=e.getFirstKey)===null||p===void 0?void 0:p.call(e))!==null&&g!==void 0?g:null;if(F==null){let C=U();tt(n.current),nt(C,null),t.collection.size>0&&(N.current=!1)}else t.setFocusedKey(F),N.current=!1}},[t.collection]),Me(()=>{t.collection.size>0&&(N.current=!1)},[t.focusedKey]),se(n,Ft,d?p=>{var g;p.stopPropagation(),t.setFocused(!1),!((g=p.detail)===null||g===void 0)&&g.clearFocusKey&&t.setFocusedKey(null)}:void 0);const j=b.useRef(l),B=b.useRef(!1);b.useEffect(()=>{if(j.current){var p,g;let P=null;var F;l==="first"&&(P=(F=(p=e.getFirstKey)===null||p===void 0?void 0:p.call(e))!==null&&F!==void 0?F:null);var C;l==="last"&&(P=(C=(g=e.getLastKey)===null||g===void 0?void 0:g.call(e))!==null&&C!==void 0?C:null);let M=t.selectedKeys;if(M.size){for(let u of M)if(t.canSelectItem(u)){P=u;break}}t.setFocused(!0),t.setFocusedKey(P),P==null&&!d&&n.current&&ce(n.current),t.collection.size>0&&(j.current=!1,B.current=!0)}});let I=b.useRef(t.focusedKey),q=b.useRef(null);b.useEffect(()=>{if(t.isFocused&&t.focusedKey!=null&&(t.focusedKey!==I.current||B.current)&&h.current&&n.current){let p=we(),g=oe(n,t.focusedKey);if(!(g instanceof HTMLElement))return;(p==="keyboard"||B.current)&&(q.current&&cancelAnimationFrame(q.current),q.current=requestAnimationFrame(()=>{h.current&&(Qe(h.current,g),p!=="virtual"&&Re(g,{containingElement:n.current}))}))}!d&&t.isFocused&&t.focusedKey==null&&I.current!=null&&n.current&&ce(n.current),I.current=t.focusedKey,B.current=!1}),b.useEffect(()=>()=>{q.current&&cancelAnimationFrame(q.current)},[]),se(n,"react-aria-focus-scope-restore",p=>{p.preventDefault(),t.setFocused(!0)});let ee={onKeyDown:w,onFocus:T,onBlur:K,onMouseDown(p){h.current===p.target&&p.preventDefault()}},{typeSelectProps:Y}=Jt({keyboardDelegate:e,selectionManager:t});v||(ee=ie(Y,ee));let J;d||(J=t.focusedKey==null?0:-1);let D=Vt(t.collection);return{collectionProps:ie(ee,{tabIndex:J,"data-collection":D})}}function wn(i){let{id:t,selectionManager:e,key:n,ref:l,shouldSelectOnPressUp:r,shouldUseVirtualFocus:s,focus:o,isDisabled:c,onAction:a,allowsDifferentPressOrigin:v,linkBehavior:d="action"}=i,f=Ye();t=Ze(t);let h=u=>{if(u.pointerType==="keyboard"&&Fe(u))e.toggleSelection(n);else{if(e.selectionMode==="none")return;if(e.isLink(n)){if(d==="selection"&&l.current){let R=e.getItemProps(n);f.open(l.current,u,R.href,R.routerOptions),e.setSelectedKeys(e.selectedKeys);return}else if(d==="override"||d==="none")return}e.selectionMode==="single"?e.isSelected(n)&&!e.disallowEmptySelection?e.toggleSelection(n):e.replaceSelection(n):u&&u.shiftKey?e.extendSelection(n):e.selectionBehavior==="toggle"||u&&(le(u)||u.pointerType==="touch"||u.pointerType==="virtual")?e.toggleSelection(n):e.replaceSelection(n)}};b.useEffect(()=>{n===e.focusedKey&&e.isFocused&&(s?tt(l.current):o?o():document.activeElement!==l.current&&l.current&&ce(l.current))},[l,n,e.focusedKey,e.childFocusStrategy,e.isFocused,s]),c=c||e.isDisabled(n);let m={};!s&&!c?m={tabIndex:n===e.focusedKey?0:-1,onFocus(u){u.target===l.current&&e.setFocusedKey(n)}}:c&&(m.onMouseDown=u=>{u.preventDefault()}),b.useEffect(()=>{c&&e.focusedKey===n&&e.setFocusedKey(null)},[e,c,n]);let E=e.isLink(n)&&d==="override",$=a&&i.UNSTABLE_itemBehavior==="action",w=e.isLink(n)&&d!=="selection"&&d!=="none",S=!c&&e.canSelectItem(n)&&!E&&!$,T=(a||w)&&!c,K=T&&(e.selectionBehavior==="replace"?!S:!S||e.isEmpty),N=T&&S&&e.selectionBehavior==="replace",j=K||N,B=b.useRef(null),I=j&&S,q=b.useRef(!1),ee=b.useRef(!1),Y=e.getItemProps(n),J=u=>{if(a){var R;a(),(R=l.current)===null||R===void 0||R.dispatchEvent(new CustomEvent("react-aria-item-action",{bubbles:!0}))}w&&l.current&&f.open(l.current,u,Y.href,Y.routerOptions)},D={ref:l};if(r?(D.onPressStart=u=>{B.current=u.pointerType,q.current=I,u.pointerType==="keyboard"&&(!j||Ue(u.key))&&h(u)},v?(D.onPressUp=K?void 0:u=>{u.pointerType==="mouse"&&S&&h(u)},D.onPress=K?J:u=>{u.pointerType!=="keyboard"&&u.pointerType!=="mouse"&&S&&h(u)}):D.onPress=u=>{if(K||N&&u.pointerType!=="mouse"){if(u.pointerType==="keyboard"&&!He(u.key))return;J(u)}else u.pointerType!=="keyboard"&&S&&h(u)}):(D.onPressStart=u=>{B.current=u.pointerType,q.current=I,ee.current=K,S&&(u.pointerType==="mouse"&&!K||u.pointerType==="keyboard"&&(!T||Ue(u.key)))&&h(u)},D.onPress=u=>{(u.pointerType==="touch"||u.pointerType==="pen"||u.pointerType==="virtual"||u.pointerType==="keyboard"&&j&&He(u.key)||u.pointerType==="mouse"&&ee.current)&&(j?J(u):S&&h(u))}),m["data-collection"]=Gt(e.collection),m["data-key"]=n,D.preventFocusOnPress=s,s&&(D=ie(D,{onPressStart(u){u.pointerType!=="touch"&&(e.setFocused(!0),e.setFocusedKey(n))},onPress(u){u.pointerType==="touch"&&(e.setFocused(!0),e.setFocusedKey(n))}})),Y)for(let u of["onPressStart","onPressEnd","onPressChange","onPress","onPressUp","onClick"])Y[u]&&(D[u]=yt(D[u],Y[u]));let{pressProps:p,isPressed:g}=Xe(D),F=N?u=>{B.current==="mouse"&&(u.stopPropagation(),u.preventDefault(),J(u))}:void 0,{longPressProps:C}=Nt({isDisabled:!I,onLongPress(u){u.pointerType==="touch"&&(h(u),e.setSelectionBehavior("toggle"))}}),P=u=>{B.current==="touch"&&q.current&&u.preventDefault()},M=d!=="none"&&e.isLink(n)?u=>{vt.isOpening||u.preventDefault()}:void 0;return{itemProps:ie(m,S||K||s&&!c?p:{},I?C:{},{onDoubleClick:F,onDragStartCapture:P,onClick:M,id:t},s?{onMouseDown:u=>u.preventDefault()}:void 0),isPressed:g,isSelected:e.isSelected(n),isFocused:e.isFocused&&e.focusedKey===n,isDisabled:c,allowsSelection:S,hasAction:j}}function He(i){return i==="Enter"}function Ue(i){return i===" "}class En{getItemRect(t){let e=this.ref.current;if(!e)return null;let n=t!=null?oe(this.ref,t):null;if(!n)return null;let l=e.getBoundingClientRect(),r=n.getBoundingClientRect();return{x:r.left-l.left-e.clientLeft+e.scrollLeft,y:r.top-l.top-e.clientTop+e.scrollTop,width:r.width,height:r.height}}getContentSize(){let t=this.ref.current;var e,n;return{width:(e=t?.scrollWidth)!==null&&e!==void 0?e:0,height:(n=t?.scrollHeight)!==null&&n!==void 0?n:0}}getVisibleRect(){let t=this.ref.current;var e,n,l,r;return{x:(e=t?.scrollLeft)!==null&&e!==void 0?e:0,y:(n=t?.scrollTop)!==null&&n!==void 0?n:0,width:(l=t?.clientWidth)!==null&&l!==void 0?l:0,height:(r=t?.clientHeight)!==null&&r!==void 0?r:0}}constructor(t){this.ref=t}}function te(i,t,e){let n=e.initialDeps??[],l;return()=>{var r,s,o,c;let a;e.key&&((r=e.debug)!=null&&r.call(e))&&(a=Date.now());const v=i();if(!(v.length!==n.length||v.some((h,m)=>n[m]!==h)))return l;n=v;let f;if(e.key&&((s=e.debug)!=null&&s.call(e))&&(f=Date.now()),l=t(...v),e.key&&((o=e.debug)!=null&&o.call(e))){const h=Math.round((Date.now()-a)*100)/100,m=Math.round((Date.now()-f)*100)/100,E=m/16,$=(w,S)=>{for(w=String(w);w.length<S;)w=" "+w;return w};console.info(`%câ± ${$(m,5)} /${$(h,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*E,120))}deg 100% 31%);`,e?.key)}return(c=e?.onChange)==null||c.call(e,l),l}}function $e(i,t){if(i===void 0)throw new Error("Unexpected undefined");return i}const Zt=(i,t)=>Math.abs(i-t)<1,Qt=(i,t,e)=>{let n;return function(...l){i.clearTimeout(n),n=i.setTimeout(()=>t.apply(this,l),e)}},_t=i=>i,en=i=>{const t=Math.max(i.startIndex-i.overscan,0),e=Math.min(i.endIndex+i.overscan,i.count-1),n=[];for(let l=t;l<=e;l++)n.push(l);return n},tn=(i,t)=>{const e=i.scrollElement;if(!e)return;const n=i.targetWindow;if(!n)return;const l=s=>{const{width:o,height:c}=s;t({width:Math.round(o),height:Math.round(c)})};if(l(e.getBoundingClientRect()),!n.ResizeObserver)return()=>{};const r=new n.ResizeObserver(s=>{const o=s[0];if(o?.borderBoxSize){const c=o.borderBoxSize[0];if(c){l({width:c.inlineSize,height:c.blockSize});return}}l(e.getBoundingClientRect())});return r.observe(e,{box:"border-box"}),()=>{r.unobserve(e)}},je={passive:!0},nn=typeof window>"u"?!0:"onscrollend"in window,ln=(i,t)=>{const e=i.scrollElement;if(!e)return;const n=i.targetWindow;if(!n)return;let l=0;const r=i.options.useScrollendEvent&&nn?()=>{}:Qt(n,()=>{t(l,!1)},i.options.isScrollingResetDelay),s=a=>()=>{const{horizontal:v,isRtl:d}=i.options;l=v?e.scrollLeft*(d&&-1||1):e.scrollTop,r(),t(l,a)},o=s(!0),c=s(!1);return c(),e.addEventListener("scroll",o,je),e.addEventListener("scrollend",c,je),()=>{e.removeEventListener("scroll",o),e.removeEventListener("scrollend",c)}},rn=(i,t,e)=>{if(t?.borderBoxSize){const n=t.borderBoxSize[0];if(n)return Math.round(n[e.options.horizontal?"inlineSize":"blockSize"])}return Math.round(i.getBoundingClientRect()[e.options.horizontal?"width":"height"])},sn=(i,{adjustments:t=0,behavior:e},n)=>{var l,r;const s=i+t;(r=(l=n.scrollElement)==null?void 0:l.scrollTo)==null||r.call(l,{[n.options.horizontal?"left":"top"]:s,behavior:e})};class on{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let e=null;const n=()=>e||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:e=new this.targetWindow.ResizeObserver(l=>{l.forEach(r=>{this._measureElement(r.target,r)})}));return{disconnect:()=>{var l;(l=n())==null||l.disconnect(),e=null},observe:l=>{var r;return(r=n())==null?void 0:r.observe(l,{box:"border-box"})},unobserve:l=>{var r;return(r=n())==null?void 0:r.unobserve(l)}}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach(([n,l])=>{typeof l>"u"&&delete e[n]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:_t,rangeExtractor:en,onChange:()=>{},measureElement:rn,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!0,...e}},this.notify=e=>{var n,l;(l=(n=this.options).onChange)==null||l.call(n,this,e)},this.maybeNotify=te(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),e=>{this.notify(e)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(e=>e()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var e;const n=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==n){if(this.cleanup(),!n){this.maybeNotify();return}this.scrollElement=n,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((e=this.scrollElement)==null?void 0:e.window)??null,this.elementsCache.forEach(l=>{this.observer.observe(l)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,l=>{this.scrollRect=l,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(l,r)=>{this.scrollAdjustments=0,this.scrollDirection=r?this.getScrollOffset()<l?"forward":"backward":null,this.scrollOffset=l,this.isScrolling=r,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(e,n)=>{const l=new Map,r=new Map;for(let s=n-1;s>=0;s--){const o=e[s];if(l.has(o.lane))continue;const c=r.get(o.lane);if(c==null||o.end>c.end?r.set(o.lane,o):o.end<c.end&&l.set(o.lane,!0),l.size===this.options.lanes)break}return r.size===this.options.lanes?Array.from(r.values()).sort((s,o)=>s.end===o.end?s.index-o.index:s.end-o.end)[0]:void 0},this.getMeasurementOptions=te(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(e,n,l,r,s)=>(this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:n,scrollMargin:l,getItemKey:r,enabled:s}),{key:!1}),this.getMeasurements=te(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:e,paddingStart:n,scrollMargin:l,getItemKey:r,enabled:s},o)=>{if(!s)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(v=>{this.itemSizeCache.set(v.key,v.size)}));const c=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const a=this.measurementsCache.slice(0,c);for(let v=c;v<e;v++){const d=r(v),f=this.options.lanes===1?a[v-1]:this.getFurthestMeasurement(a,v),h=f?f.end+this.options.gap:n+l,m=o.get(d),E=typeof m=="number"?m:this.options.estimateSize(v),$=h+E,w=f?f.lane:v%this.options.lanes;a[v]={index:v,start:h,size:E,end:$,key:d,lane:w}}return this.measurementsCache=a,a},{key:!1,debug:()=>this.options.debug}),this.calculateRange=te(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset()],(e,n,l)=>this.range=e.length>0&&n>0?cn({measurements:e,outerSize:n,scrollOffset:l}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=te(()=>{let e=null,n=null;const l=this.calculateRange();return l&&(e=l.startIndex,n=l.endIndex),[this.options.rangeExtractor,this.options.overscan,this.options.count,e,n]},(e,n,l,r,s)=>r===null||s===null?[]:e({startIndex:r,endIndex:s,overscan:n,count:l}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=e=>{const n=this.options.indexAttribute,l=e.getAttribute(n);return l?parseInt(l,10):(console.warn(`Missing attribute name '${n}={index}' on measured element.`),-1)},this._measureElement=(e,n)=>{const l=this.indexFromElement(e),r=this.measurementsCache[l];if(!r)return;const s=r.key,o=this.elementsCache.get(s);o!==e&&(o&&this.observer.unobserve(o),this.observer.observe(e),this.elementsCache.set(s,e)),e.isConnected&&this.resizeItem(l,this.options.measureElement(e,n,this))},this.resizeItem=(e,n)=>{const l=this.measurementsCache[e];if(!l)return;const r=this.itemSizeCache.get(l.key)??l.size,s=n-r;s!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(l,s,this):l.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=s,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(l.index),this.itemSizeCache=new Map(this.itemSizeCache.set(l.key,n)),this.notify(!1))},this.measureElement=e=>{if(!e){this.elementsCache.forEach((n,l)=>{n.isConnected||(this.observer.unobserve(n),this.elementsCache.delete(l))});return}this._measureElement(e,void 0)},this.getVirtualItems=te(()=>[this.getIndexes(),this.getMeasurements()],(e,n)=>{const l=[];for(let r=0,s=e.length;r<s;r++){const o=e[r],c=n[o];l.push(c)}return l},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{const n=this.getMeasurements();if(n.length!==0)return $e(n[rt(0,n.length-1,l=>$e(n[l]).start,e)])},this.getOffsetForAlignment=(e,n)=>{const l=this.getSize(),r=this.getScrollOffset();n==="auto"&&e>=r+l&&(n="end"),n==="end"&&(e-=l);const s=this.options.horizontal?"scrollWidth":"scrollHeight",c=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[s]:this.scrollElement[s]:0)-l;return Math.max(Math.min(c,e),0)},this.getOffsetForIndex=(e,n="auto")=>{e=Math.max(0,Math.min(e,this.options.count-1));const l=this.measurementsCache[e];if(!l)return;const r=this.getSize(),s=this.getScrollOffset();if(n==="auto")if(l.end>=s+r-this.options.scrollPaddingEnd)n="end";else if(l.start<=s+this.options.scrollPaddingStart)n="start";else return[s,n];const o=l.start-this.options.scrollPaddingStart+(l.size-r)/2;switch(n){case"center":return[this.getOffsetForAlignment(o,n),n];case"end":return[this.getOffsetForAlignment(l.end+this.options.scrollPaddingEnd,n),n];default:return[this.getOffsetForAlignment(l.start-this.options.scrollPaddingStart,n),n]}},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(e,{align:n="start",behavior:l}={})=>{this.cancelScrollToIndex(),l==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(e,n),{adjustments:void 0,behavior:l})},this.scrollToIndex=(e,{align:n="auto",behavior:l}={})=>{e=Math.max(0,Math.min(e,this.options.count-1)),this.cancelScrollToIndex(),l==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const r=this.getOffsetForIndex(e,n);if(!r)return;const[s,o]=r;this._scrollToOffset(s,{adjustments:void 0,behavior:l}),l!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(e))){const[a]=$e(this.getOffsetForIndex(e,o));Zt(a,this.getScrollOffset())||this.scrollToIndex(e,{align:o,behavior:l})}else this.scrollToIndex(e,{align:o,behavior:l})}))},this.scrollBy=(e,{behavior:n}={})=>{this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+e,{adjustments:void 0,behavior:n})},this.getTotalSize=()=>{var e;const n=this.getMeasurements();let l;return n.length===0?l=this.options.paddingStart:l=this.options.lanes===1?((e=n[n.length-1])==null?void 0:e.end)??0:Math.max(...n.slice(-this.options.lanes).map(r=>r.end)),Math.max(l-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(e,{adjustments:n,behavior:l})=>{this.options.scrollToFn(e,{behavior:l,adjustments:n},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(t)}}const rt=(i,t,e,n)=>{for(;i<=t;){const l=(i+t)/2|0,r=e(l);if(r<n)i=l+1;else if(r>n)t=l-1;else return l}return i>0?i-1:0};function cn({measurements:i,outerSize:t,scrollOffset:e}){const n=i.length-1,r=rt(0,n,o=>i[o].start,e);let s=r;for(;s<n&&i[s].end<e+t;)s++;return{startIndex:r,endIndex:s}}const qe=typeof document<"u"?b.useLayoutEffect:b.useEffect;function an(i){const t=b.useReducer(()=>({}),{})[1],e={...i,onChange:(l,r)=>{var s;r?Je.flushSync(t):t(),(s=i.onChange)==null||s.call(i,l,r)}},[n]=b.useState(()=>new on(e));return n.setOptions(e),qe(()=>n._didMount(),[]),qe(()=>n._willUpdate()),n}function xn(i){return an({observeElementRect:tn,observeElementOffset:ln,scrollToFn:sn,...i})}export{pn as $,hn as a,Ee as b,Ut as c,En as d,vn as e,Sn as f,yn as g,gn as h,lt as i,wn as j,fn as k,mn as l,bn as m,G as n,$n as o,jt as p,qt as q,Kt as r,Re as s,xn as u};
