import{d as _,K as z,b as T,x as m,w as $,L as R,G as J,M as B,C as G,N as j,B as X,f as Y,o as D,p as Q,q as Z,h as ee}from"./chunk-YFAKJTDR-DKwxRaj9.js";import{E as te}from"./chunk-BGEKJ4Q5-DzVAaTre.js";import{r as v,R as g}from"./iframe-rb5u8kG-.js";class re{get currentNode(){return this._currentNode}set currentNode(e){if(!_(this.root,e))throw new Error("Cannot set currentNode to a node that is not contained by the root node.");const t=[];let o=e,n=e;for(this._currentNode=e;o&&o!==this.root;)if(o.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const a=o,l=this._doc.createTreeWalker(a,this.whatToShow,{acceptNode:this._acceptNode});t.push(l),l.currentNode=n,this._currentSetFor.add(l),o=n=a.host}else o=o.parentNode;const i=this._doc.createTreeWalker(this.root,this.whatToShow,{acceptNode:this._acceptNode});t.push(i),i.currentNode=n,this._currentSetFor.add(i),this._walkerStack=t}get doc(){return this._doc}firstChild(){let e=this.currentNode,t=this.nextNode();return _(e,t)?(t&&(this.currentNode=t),t):(this.currentNode=e,null)}lastChild(){let t=this._walkerStack[0].lastChild();return t&&(this.currentNode=t),t}nextNode(){const e=this._walkerStack[0].nextNode();if(e){if(e.shadowRoot){var t;let n;if(typeof this.filter=="function"?n=this.filter(e):!((t=this.filter)===null||t===void 0)&&t.acceptNode&&(n=this.filter.acceptNode(e)),n===NodeFilter.FILTER_ACCEPT)return this.currentNode=e,e;let i=this.nextNode();return i&&(this.currentNode=i),i}return e&&(this.currentNode=e),e}else if(this._walkerStack.length>1){this._walkerStack.shift();let o=this.nextNode();return o&&(this.currentNode=o),o}else return null}previousNode(){const e=this._walkerStack[0];if(e.currentNode===e.root){if(this._currentSetFor.has(e))if(this._currentSetFor.delete(e),this._walkerStack.length>1){this._walkerStack.shift();let n=this.previousNode();return n&&(this.currentNode=n),n}else return null;return null}const t=e.previousNode();if(t){if(t.shadowRoot){var o;let i;if(typeof this.filter=="function"?i=this.filter(t):!((o=this.filter)===null||o===void 0)&&o.acceptNode&&(i=this.filter.acceptNode(t)),i===NodeFilter.FILTER_ACCEPT)return t&&(this.currentNode=t),t;let a=this.lastChild();return a&&(this.currentNode=a),a}return t&&(this.currentNode=t),t}else if(this._walkerStack.length>1){this._walkerStack.shift();let n=this.previousNode();return n&&(this.currentNode=n),n}else return null}nextSibling(){return null}previousSibling(){return null}parentNode(){return null}constructor(e,t,o,n){this._walkerStack=[],this._currentSetFor=new Set,this._acceptNode=a=>{if(a.nodeType===Node.ELEMENT_NODE){const h=a.shadowRoot;if(h){const u=this._doc.createTreeWalker(h,this.whatToShow,{acceptNode:this._acceptNode});return this._walkerStack.unshift(u),NodeFilter.FILTER_ACCEPT}else{var l;if(typeof this.filter=="function")return this.filter(a);if(!((l=this.filter)===null||l===void 0)&&l.acceptNode)return this.filter.acceptNode(a);if(this.filter===null)return NodeFilter.FILTER_ACCEPT}}return NodeFilter.FILTER_SKIP},this._doc=e,this.root=t,this.filter=n??null,this.whatToShow=o??NodeFilter.SHOW_ALL,this._currentNode=t,this._walkerStack.unshift(e.createTreeWalker(t,o,this._acceptNode));const i=t.shadowRoot;if(i){const a=this._doc.createTreeWalker(i,this.whatToShow,{acceptNode:this._acceptNode});this._walkerStack.unshift(a)}}}function ne(r,e,t,o){return te()?new re(r,e,t,o):r.createTreeWalker(e,t,o)}function V(r,e){if(!r)return!1;let t=window.getComputedStyle(r),o=/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY);return o&&e&&(o=r.scrollHeight!==r.clientHeight||r.scrollWidth!==r.clientWidth),o}function Ne(r,e){let t=r;for(V(t,e)&&(t=t.parentElement);t&&!V(t,e);)t=t.parentElement;return t||document.scrollingElement||document.documentElement}function pe(r){return z()?r.metaKey:r.ctrlKey}const oe=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function $e(r){return r instanceof HTMLInputElement&&!oe.has(r.type)||r instanceof HTMLTextAreaElement||r instanceof HTMLElement&&r.isContentEditable}var I;const ie=typeof document<"u"?(I=g.useInsertionEffect)!==null&&I!==void 0?I:g.useLayoutEffect:()=>{};function le(r,e,t){let[o,n]=v.useState(r||e),i=v.useRef(o),a=v.useRef(r!==void 0),l=r!==void 0;v.useEffect(()=>{a.current,a.current=l},[l]);let h=l?r:o;ie(()=>{i.current=h});let[,u]=v.useReducer(()=>({}),{}),f=v.useCallback((c,...s)=>{let d=typeof c=="function"?c(i.current):c;Object.is(i.current,d)||(i.current=d,n(d),u(),t?.(d,...s))},[t]);return[h,f]}const W=g.createContext(null),M="react-aria-focus-scope-restore";let b=null;function Ee(r){let{children:e,contain:t,restoreFocus:o,autoFocus:n}=r,i=v.useRef(null),a=v.useRef(null),l=v.useRef([]),{parentNode:h}=v.useContext(W)||{},u=v.useMemo(()=>new P({scopeRef:l}),[l]);T(()=>{let s=h||p.root;if(p.getTreeNode(s.scopeRef)&&b&&!C(b,s.scopeRef)){let d=p.getTreeNode(b);d&&(s=d)}s.addChild(u),p.addNode(u)},[u,h]),T(()=>{let s=p.getTreeNode(l);s&&(s.contain=!!t)},[t]),T(()=>{var s;let d=(s=i.current)===null||s===void 0?void 0:s.nextSibling,N=[],k=L=>L.stopPropagation();for(;d&&d!==a.current;)N.push(d),d.addEventListener(M,k),d=d.nextSibling;return l.current=N,()=>{for(let L of N)L.removeEventListener(M,k)}},[e]),de(l,o,t),ce(l,t),fe(l,o,t),se(l,n),v.useEffect(()=>{const s=m($(l.current?l.current[0]:void 0));let d=null;if(E(s,l.current)){for(let N of p.traverse())N.scopeRef&&E(s,N.scopeRef.current)&&(d=N);d===p.getTreeNode(l)&&(b=d.scopeRef)}},[l]),T(()=>()=>{var s,d,N;let k=(N=(d=p.getTreeNode(l))===null||d===void 0||(s=d.parent)===null||s===void 0?void 0:s.scopeRef)!==null&&N!==void 0?N:null;(l===b||C(l,b))&&(!k||p.getTreeNode(k))&&(b=k),p.removeTreeNode(l)},[l]);let f=v.useMemo(()=>ae(l),[]),c=v.useMemo(()=>({focusManager:f,parentNode:u}),[u,f]);return g.createElement(W.Provider,{value:c},g.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:i}),e,g.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:a}))}function ae(r){return{focusNext(e={}){let t=r.current,{from:o,tabbable:n,wrap:i,accept:a}=e;var l;let h=o||m($((l=t[0])!==null&&l!==void 0?l:void 0)),u=t[0].previousElementSibling,f=x(t),c=S(f,{tabbable:n,accept:a},t);c.currentNode=E(h,t)?h:u;let s=c.nextNode();return!s&&i&&(c.currentNode=u,s=c.nextNode()),s&&w(s,!0),s},focusPrevious(e={}){let t=r.current,{from:o,tabbable:n,wrap:i,accept:a}=e;var l;let h=o||m($((l=t[0])!==null&&l!==void 0?l:void 0)),u=t[t.length-1].nextElementSibling,f=x(t),c=S(f,{tabbable:n,accept:a},t);c.currentNode=E(h,t)?h:u;let s=c.previousNode();return!s&&i&&(c.currentNode=u,s=c.previousNode()),s&&w(s,!0),s},focusFirst(e={}){let t=r.current,{tabbable:o,accept:n}=e,i=x(t),a=S(i,{tabbable:o,accept:n},t);a.currentNode=t[0].previousElementSibling;let l=a.nextNode();return l&&w(l,!0),l},focusLast(e={}){let t=r.current,{tabbable:o,accept:n}=e,i=x(t),a=S(i,{tabbable:o,accept:n},t);a.currentNode=t[t.length-1].nextElementSibling;let l=a.previousNode();return l&&w(l,!0),l}}}function x(r){return r[0].parentElement}function y(r){let e=p.getTreeNode(b);for(;e&&e.scopeRef!==r;){if(e.contain)return!1;e=e.parent}return!0}function ue(r){if(r.checked)return!0;let e=[];if(!r.form)e=[...$(r).querySelectorAll(`input[type="radio"][name="${CSS.escape(r.name)}"]`)].filter(i=>!i.form);else{var t,o;let i=(o=r.form)===null||o===void 0||(t=o.elements)===null||t===void 0?void 0:t.namedItem(r.name);e=[...i??[]]}return e?!e.some(i=>i.checked):!1}function ce(r,e){let t=v.useRef(void 0),o=v.useRef(void 0);T(()=>{let n=r.current;if(!e){o.current&&(cancelAnimationFrame(o.current),o.current=void 0);return}const i=$(n?n[0]:void 0);let a=u=>{if(u.key!=="Tab"||u.altKey||u.ctrlKey||u.metaKey||!y(r)||u.isComposing)return;let f=m(i),c=r.current;if(!c||!E(f,c))return;let s=x(c),d=S(s,{tabbable:!0},c);if(!f)return;d.currentNode=f;let N=u.shiftKey?d.previousNode():d.nextNode();N||(d.currentNode=u.shiftKey?c[c.length-1].nextElementSibling:c[0].previousElementSibling,N=u.shiftKey?d.previousNode():d.nextNode()),u.preventDefault(),N&&w(N,!0)},l=u=>{(!b||C(b,r))&&E(R(u),r.current)?(b=r,t.current=R(u)):y(r)&&!F(R(u),r)?t.current?t.current.focus():b&&b.current&&A(b.current):y(r)&&(t.current=R(u))},h=u=>{o.current&&cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{let f=Y(),c=(f==="virtual"||f===null)&&J()&&B(),s=m(i);if(!c&&s&&y(r)&&!F(s,r)){b=r;let N=R(u);if(N&&N.isConnected){var d;t.current=N,(d=t.current)===null||d===void 0||d.focus()}else b.current&&A(b.current)}})};return i.addEventListener("keydown",a,!1),i.addEventListener("focusin",l,!1),n?.forEach(u=>u.addEventListener("focusin",l,!1)),n?.forEach(u=>u.addEventListener("focusout",h,!1)),()=>{i.removeEventListener("keydown",a,!1),i.removeEventListener("focusin",l,!1),n?.forEach(u=>u.removeEventListener("focusin",l,!1)),n?.forEach(u=>u.removeEventListener("focusout",h,!1))}},[r,e]),T(()=>()=>{o.current&&cancelAnimationFrame(o.current)},[o])}function U(r){return F(r)}function E(r,e){return!r||!e?!1:e.some(t=>_(t,r))}function F(r,e=null){if(r instanceof Element&&r.closest("[data-react-aria-top-layer]"))return!0;for(let{scopeRef:t}of p.traverse(p.getTreeNode(e)))if(t&&E(r,t.current))return!0;return!1}function C(r,e){var t;let o=(t=p.getTreeNode(e))===null||t===void 0?void 0:t.parent;for(;o;){if(o.scopeRef===r)return!0;o=o.parent}return!1}function w(r,e=!1){if(r!=null&&!e)try{X(r)}catch{}else if(r!=null)try{r.focus()}catch{}}function q(r,e=!0){let t=r[0].previousElementSibling,o=x(r),n=S(o,{tabbable:e},r);n.currentNode=t;let i=n.nextNode();return e&&!i&&(o=x(r),n=S(o,{tabbable:!1},r),n.currentNode=t,i=n.nextNode()),i}function A(r,e=!0){w(q(r,e))}function se(r,e){const t=g.useRef(e);v.useEffect(()=>{if(t.current){b=r;const o=$(r.current?r.current[0]:void 0);!E(m(o),b.current)&&r.current&&A(r.current)}t.current=!1},[r])}function de(r,e,t){T(()=>{if(e||t)return;let o=r.current;const n=$(o?o[0]:void 0);let i=a=>{let l=R(a);E(l,r.current)?b=r:U(l)||(b=null)};return n.addEventListener("focusin",i,!1),o?.forEach(a=>a.addEventListener("focusin",i,!1)),()=>{n.removeEventListener("focusin",i,!1),o?.forEach(a=>a.removeEventListener("focusin",i,!1))}},[r,e,t])}function O(r){let e=p.getTreeNode(b);for(;e&&e.scopeRef!==r;){if(e.nodeToRestore)return!1;e=e.parent}return e?.scopeRef===r}function fe(r,e,t){const o=v.useRef(typeof document<"u"?m($(r.current?r.current[0]:void 0)):null);T(()=>{let n=r.current;const i=$(n?n[0]:void 0);if(!e||t)return;let a=()=>{(!b||C(b,r))&&E(m(i),r.current)&&(b=r)};return i.addEventListener("focusin",a,!1),n?.forEach(l=>l.addEventListener("focusin",a,!1)),()=>{i.removeEventListener("focusin",a,!1),n?.forEach(l=>l.removeEventListener("focusin",a,!1))}},[r,t]),T(()=>{const n=$(r.current?r.current[0]:void 0);if(!e)return;let i=a=>{if(a.key!=="Tab"||a.altKey||a.ctrlKey||a.metaKey||!y(r)||a.isComposing)return;let l=n.activeElement;if(!F(l,r)||!O(r))return;let h=p.getTreeNode(r);if(!h)return;let u=h.nodeToRestore,f=S(n.body,{tabbable:!0});f.currentNode=l;let c=a.shiftKey?f.previousNode():f.nextNode();if((!u||!u.isConnected||u===n.body)&&(u=void 0,h.nodeToRestore=void 0),(!c||!F(c,r))&&u){f.currentNode=u;do c=a.shiftKey?f.previousNode():f.nextNode();while(F(c,r));a.preventDefault(),a.stopPropagation(),c?w(c,!0):U(u)?w(u,!0):l.blur()}};return t||n.addEventListener("keydown",i,!0),()=>{t||n.removeEventListener("keydown",i,!0)}},[r,e,t]),T(()=>{const n=$(r.current?r.current[0]:void 0);if(!e)return;let i=p.getTreeNode(r);if(i){var a;return i.nodeToRestore=(a=o.current)!==null&&a!==void 0?a:void 0,()=>{let l=p.getTreeNode(r);if(!l)return;let h=l.nodeToRestore,u=m(n);if(e&&h&&(u&&F(u,r)||u===n.body&&O(r))){let f=p.clone();requestAnimationFrame(()=>{if(n.activeElement===n.body){let c=f.getTreeNode(r);for(;c;){if(c.nodeToRestore&&c.nodeToRestore.isConnected){H(c.nodeToRestore);return}c=c.parent}for(c=f.getTreeNode(r);c;){if(c.scopeRef&&c.scopeRef.current&&p.getTreeNode(c.scopeRef)){let s=q(c.scopeRef.current,!0);H(s);return}c=c.parent}}})}}}},[r,e])}function H(r){r.dispatchEvent(new CustomEvent(M,{bubbles:!0,cancelable:!0}))&&w(r)}function S(r,e,t){let o=e?.tabbable?G:j,n=r?.nodeType===Node.ELEMENT_NODE?r:null,i=$(n),a=ne(i,r||i,NodeFilter.SHOW_ELEMENT,{acceptNode(l){return _(e?.from,l)||e?.tabbable&&l.tagName==="INPUT"&&l.getAttribute("type")==="radio"&&(!ue(l)||a.currentNode.tagName==="INPUT"&&a.currentNode.type==="radio"&&a.currentNode.name===l.name)?NodeFilter.FILTER_REJECT:o(l)&&(!t||E(l,t))&&(!e?.accept||e.accept(l))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return e?.from&&(a.currentNode=e.from),a}class K{get size(){return this.fastMap.size}getTreeNode(e){return this.fastMap.get(e)}addTreeNode(e,t,o){let n=this.fastMap.get(t??null);if(!n)return;let i=new P({scopeRef:e});n.addChild(i),i.parent=n,this.fastMap.set(e,i),o&&(i.nodeToRestore=o)}addNode(e){this.fastMap.set(e.scopeRef,e)}removeTreeNode(e){if(e===null)return;let t=this.fastMap.get(e);if(!t)return;let o=t.parent;for(let i of this.traverse())i!==t&&t.nodeToRestore&&i.nodeToRestore&&t.scopeRef&&t.scopeRef.current&&E(i.nodeToRestore,t.scopeRef.current)&&(i.nodeToRestore=t.nodeToRestore);let n=t.children;o&&(o.removeChild(t),n.size>0&&n.forEach(i=>o&&o.addChild(i))),this.fastMap.delete(t.scopeRef)}*traverse(e=this.root){if(e.scopeRef!=null&&(yield e),e.children.size>0)for(let t of e.children)yield*this.traverse(t)}clone(){var e;let t=new K;var o;for(let n of this.traverse())t.addTreeNode(n.scopeRef,(o=(e=n.parent)===null||e===void 0?void 0:e.scopeRef)!==null&&o!==void 0?o:null,n.nodeToRestore);return t}constructor(){this.fastMap=new Map,this.root=new P({scopeRef:null}),this.fastMap.set(null,this.root)}}class P{addChild(e){this.children.add(e),e.parent=this}removeChild(e){this.children.delete(e),e.parent=void 0}constructor(e){this.children=new Set,this.contain=!1,this.scopeRef=e.scopeRef}}let p=new K;function Te(r={}){let{autoFocus:e=!1,isTextInput:t,within:o}=r,n=v.useRef({isFocused:!1,isFocusVisible:e||D()}),[i,a]=v.useState(!1),[l,h]=v.useState(()=>n.current.isFocused&&n.current.isFocusVisible),u=v.useCallback(()=>h(n.current.isFocused&&n.current.isFocusVisible),[]),f=v.useCallback(d=>{n.current.isFocused=d,n.current.isFocusVisible=D(),a(d),u()},[u]);Q(d=>{n.current.isFocusVisible=d,u()},[t,i],{enabled:i,isTextInput:t});let{focusProps:c}=Z({isDisabled:o,onFocusChange:f}),{focusWithinProps:s}=ee({isDisabled:!o,onFocusWithinChange:f});return{isFocused:i,isFocusVisible:l,focusProps:o?s:c}}function we(r={}){let{isReadOnly:e}=r,[t,o]=le(r.isSelected,r.defaultSelected||!1,r.onChange),[n]=v.useState(t);function i(h){e||o(h)}function a(){e||o(!t)}var l;return{isSelected:t,defaultSelected:(l=r.defaultSelected)!==null&&l!==void 0?l:n,setSelected:i,toggle:a}}export{V as $,S as a,le as b,we as c,Te as d,pe as e,Ne as f,$e as g,Ee as h};
