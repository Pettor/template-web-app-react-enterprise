import{h as B,a as h,i as U}from"./chunk-YFAKJTDR-BBykVR1J.js";import{r as o,j as x}from"./iframe-c1YiYtnK.js";import{m as k,f as N}from"./chunk-JGY6VQQQ-BkgGoZtC.js";import{f as _}from"./chunk-US4SNHVL-iB09OJwD.js";const D={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},A={...D,customError:!0,valid:!1},y={isInvalid:!1,validationDetails:D,validationErrors:[]},F=o.createContext({}),C="__formValidationState"+Date.now();function ie(t){if(t[C]){let{realtimeValidation:e,displayValidation:a,updateValidation:l,resetValidation:n,commitValidation:i}=t[C];return{realtimeValidation:e,displayValidation:a,updateValidation:l,resetValidation:n,commitValidation:i}}return q(t)}function q(t){let{isInvalid:e,validationState:a,name:l,value:n,builtinValidation:i,validate:d,validationBehavior:c="aria"}=t;a&&(e||(e=a==="invalid"));let v=e!==void 0?{isInvalid:e,validationErrors:[],validationDetails:A}:null,s=o.useMemo(()=>{if(!d||n==null)return null;let u=Q(d,n);return R(u)},[d,n]);i?.validationDetails.valid&&(i=void 0);let r=o.useContext(F),f=o.useMemo(()=>l?Array.isArray(l)?l.flatMap(u=>I(r[u])):I(r[l]):[],[r,l]),[m,O]=o.useState(r),[S,b]=o.useState(!1);r!==m&&(O(r),b(!1));let V=o.useMemo(()=>R(S?[]:f),[S,f]),w=o.useRef(y),[E,g]=o.useState(y),$=o.useRef(y),P=()=>{if(!T)return;p(!1);let u=s||i||w.current;M(u,$.current)||($.current=u,g(u))},[T,p]=o.useState(!1);return o.useEffect(P),{realtimeValidation:v||V||s||i||y,displayValidation:c==="native"?v||V||E:v||V||s||i||E,updateValidation(u){c==="aria"&&!M(E,u)?g(u):w.current=u},resetValidation(){let u=y;M(u,$.current)||($.current=u,g(u)),c==="native"&&p(!1),b(!0)},commitValidation(){c==="native"&&p(!0),b(!0)}}}function I(t){return t?Array.isArray(t)?t:[t]:[]}function Q(t,e){if(typeof t=="function"){let a=t(e);if(a&&typeof a!="boolean")return I(a)}return[]}function R(t){return t.length?{isInvalid:!0,validationErrors:t,validationDetails:A}:null}function M(t,e){return t===e?!0:!!t&&!!e&&t.isInvalid===e.isInvalid&&t.validationErrors.length===e.validationErrors.length&&t.validationErrors.every((a,l)=>a===e.validationErrors[l])&&Object.entries(t.validationDetails).every(([a,l])=>e.validationDetails[a]===l)}function re(t,e,a){let{validationBehavior:l,focus:n}=t;B(()=>{if(l==="native"&&a?.current&&!a.current.disabled){let s=e.realtimeValidation.isInvalid?e.realtimeValidation.validationErrors.join(" ")||"Invalid value.":"";a.current.setCustomValidity(s),a.current.hasAttribute("title")||(a.current.title=""),e.realtimeValidation.isInvalid||e.updateValidation(Y(a.current))}});let i=o.useRef(!1),d=h(()=>{i.current||e.resetValidation()}),c=h(s=>{var r;e.displayValidation.isInvalid||e.commitValidation();let f=a==null||(r=a.current)===null||r===void 0?void 0:r.form;if(!s.defaultPrevented&&a&&f&&z(f)===a.current){var m;n?n():(m=a.current)===null||m===void 0||m.focus(),U("keyboard")}s.preventDefault()}),v=h(()=>{e.commitValidation()});o.useEffect(()=>{let s=a?.current;if(!s)return;let r=s.form,f=r?.reset;return r&&(r.reset=()=>{i.current=!window.event||window.event.type==="message"&&window.event.target instanceof MessagePort,f?.call(r),i.current=!1}),s.addEventListener("invalid",c),s.addEventListener("change",v),r?.addEventListener("reset",d),()=>{s.removeEventListener("invalid",c),s.removeEventListener("change",v),r?.removeEventListener("reset",d),r&&(r.reset=f)}},[a,c,v,d,l])}function K(t){let e=t.validity;return{badInput:e.badInput,customError:e.customError,patternMismatch:e.patternMismatch,rangeOverflow:e.rangeOverflow,rangeUnderflow:e.rangeUnderflow,stepMismatch:e.stepMismatch,tooLong:e.tooLong,tooShort:e.tooShort,typeMismatch:e.typeMismatch,valueMissing:e.valueMissing,valid:e.valid}}function Y(t){return{isInvalid:!t.validity.valid,validationDetails:K(t),validationErrors:t.validationMessage?[t.validationMessage]:[]}}function z(t){for(let e=0;e<t.elements.length;e++){let a=t.elements[e];if(!a.validity.valid)return a}return null}var L=Symbol("default");function G(t){const e=o.useRef(null),a=o.useRef(void 0),l=o.useCallback(n=>{if(typeof t=="function"){const i=t,d=i(n);return()=>{typeof d=="function"?d():i(null)}}else if(t)return t.current=n,()=>{t.current=null}},[t]);return o.useMemo(()=>({get current(){return e.current},set current(n){e.current=n,a.current&&(a.current(),a.current=void 0),n!=null&&(a.current=l(n))}}),[l])}function H(t,e){let a=o.useContext(t);if(e===null)return null;if(a&&typeof a=="object"&&"slots"in a&&a.slots){let l=new Intl.ListFormat().format(Object.keys(a.slots).map(i=>`"${i}"`));if(!e&&!a.slots[L])throw new Error(`A slot prop is required. Valid slot names are ${l}.`);let n=e||L;if(!a.slots[n])throw new Error(`Invalid slot "${e}". Valid slot names are ${l}.`);return a.slots[n]}return a}function J(t,e,a){let l=H(a,t.slot)||{},{ref:n,...i}=l,d=G(o.useMemo(()=>k(e,n),[e,n])),c=N(i,t);return"style"in i&&i.style&&"style"in t&&t.style&&(typeof i.style=="function"||typeof t.style=="function"?c.style=v=>{let s=typeof i.style=="function"?i.style(v):i.style,r={...v.defaultStyle,...s},f=typeof t.style=="function"?t.style({...v,defaultStyle:r}):t.style;return{...r,...f}}:c.style={...i.style,...t.style}),[c,d]}var j=o.createContext(null),le=o.forwardRef(function(e,a){[e,a]=J(e,a,j);let{validationErrors:l,validationBehavior:n="native",children:i,className:d,...c}=e;const v=o.useMemo(()=>_({className:d}),[d]);return x.jsx("form",{noValidate:n!=="native",...c,ref:a,className:v,children:x.jsx(j.Provider,{value:{...e,validationBehavior:n},children:x.jsx(F.Provider,{value:l??{},children:i})})})});export{ie as $,j as F,re as a,C as b,y as c,le as d,H as u};
